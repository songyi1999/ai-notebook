# AIç¬”è®°æœ¬é¡¹ç›®

## é¡¹ç›®ç®€ä»‹

AIç¬”è®°æœ¬æ˜¯ä¸€ä¸ª**çº¯æœ¬åœ°ã€AIå¢å¼ºçš„ä¸ªäººçŸ¥è¯†ç®¡ç†ç³»ç»Ÿ**ï¼Œæ—¨åœ¨ä¸ºç”¨æˆ·æä¾›å®‰å…¨ã€ç§å¯†ä¸”æ™ºèƒ½çš„ç¬”è®°ç®¡ç†ä½“éªŒã€‚

### æ ¸å¿ƒç‰¹æ€§

- ğŸ”’ **çº¯æœ¬åœ°è¿è¡Œ**ï¼šæ‰€æœ‰æ•°æ®å­˜å‚¨åœ¨æœ¬åœ°ï¼Œç¡®ä¿éšç§å®‰å…¨
- ğŸ“ **Markdownæ ¼å¼**ï¼šä½¿ç”¨æ ‡å‡†Markdownæ ¼å¼ï¼Œæ•°æ®å¯ç§»æ¤æ€§å¼º
- ğŸ¤– **AIæ™ºèƒ½é—®ç­”**ï¼šåŸºäºæœ¬åœ°LLMçš„RAGé—®ç­”ç³»ç»Ÿ
- ğŸ’¬ **æ™ºèƒ½å¯¹è¯**ï¼šAIåŠ©æ‰‹åŸºäºç¬”è®°å†…å®¹å›ç­”é—®é¢˜ï¼Œæ”¯æŒä¸Šä¸‹æ–‡ç†è§£
- ğŸ³ **å®¹å™¨åŒ–éƒ¨ç½²**ï¼šä¸€é”®å¯åŠ¨ï¼Œç®€åŒ–å®‰è£…å’Œè¿è¡Œ
- ğŸ•¸ï¸ **é“¾æ¥å¯è§†åŒ–**ï¼šåŒå‘é“¾æ¥ç½‘ç»œå›¾è°±å’Œå…³ç³»å±•ç¤º
- ğŸ”— **åŒå‘é“¾æ¥**ï¼šæ”¯æŒç¬”è®°é—´çš„åŒå‘é“¾æ¥å’Œå…³ç³»å¯è§†åŒ–
- ğŸ” **æ™ºèƒ½æœç´¢**ï¼šæ”¯æŒå…³é”®è¯ã€è¯­ä¹‰å’Œæ··åˆæœç´¢ï¼Œå¸¦æœç´¢å†å²
- ğŸ“ **æ™ºèƒ½æ–‡ä»¶ç®¡ç†**ï¼šæ–‡ä»¶æ ‘çŠ¶è§†å›¾ï¼Œæ”¯æŒæ‹–æ‹½ç§»åŠ¨ã€å³é”®èœå•æ“ä½œ
- âœ¨ **è‡ªåŠ¨ä¿å­˜**ï¼šå®æ—¶è‡ªåŠ¨ä¿å­˜ç¼–è¾‘å†…å®¹ï¼Œæ”¯æŒCtrl+Så¿«æ·é”®

### æœ€æ–°åŠŸèƒ½æ›´æ–°

#### ğŸ·ï¸ æ ‡ç­¾ä½¿ç”¨ç»Ÿè®¡çœŸå®æ•°æ®ä¿®å¤ (2025-07-03)
- **é—®é¢˜ä¿®å¤**ï¼šä¿®å¤æ ‡ç­¾ç®¡ç†ä¸­ä½¿ç”¨æ¬¡æ•°æ˜¾ç¤ºæ¨¡æ‹Ÿæ•°æ®çš„é—®é¢˜ï¼Œæ¯æ¬¡åˆ·æ–°æ•°æ®éƒ½ä¼šå˜åŠ¨
- **åç«¯ä¼˜åŒ–**ï¼š
  - æ–°å¢`get_tags_with_usage_stats()`æ–¹æ³•ï¼Œæ”¯æŒè·å–å¸¦çœŸå®ä½¿ç”¨ç»Ÿè®¡çš„æ ‡ç­¾åˆ—è¡¨
  - æ–°å¢`get_tag_usage_count()`æ–¹æ³•ï¼Œæ”¯æŒè·å–å•ä¸ªæ ‡ç­¾çš„ä½¿ç”¨æ¬¡æ•°
  - æ–°å¢`/tags-with-stats`å’Œ`/tags/{tag_id}/usage-count`APIç«¯ç‚¹
- **å‰ç«¯ä¼˜åŒ–**ï¼š
  - æ–°å¢`TagWithStats`æ¥å£å®šä¹‰ï¼Œæ”¯æŒä½¿ç”¨ç»Ÿè®¡æ•°æ®
  - æ–°å¢`getTagsWithStats()`APIè°ƒç”¨æ–¹æ³•
  - ä¿®æ”¹`loadTags()`å‡½æ•°ï¼Œä½¿ç”¨çœŸå®çš„ç»Ÿè®¡æ•°æ®æ›¿ä»£æ¨¡æ‹Ÿæ•°æ®
- **æ•°æ®å‡†ç¡®æ€§**ï¼š
  - æ ‡ç­¾ä½¿ç”¨æ¬¡æ•°åŸºäº`file_tags`è¡¨çš„çœŸå®å…³è”æ•°æ®è®¡ç®—
  - æ”¯æŒæ˜¾ç¤ºæœ€è¿‘ä½¿ç”¨çš„æ–‡ä»¶åˆ—è¡¨ï¼ˆæœ€å¤š5ä¸ªï¼‰
  - æ•°æ®åˆ·æ–°åä¿æŒä¸€è‡´æ€§ï¼Œä¸å†éšæœºå˜åŠ¨
- **ç”¨æˆ·ä½“éªŒ**ï¼šç»Ÿè®¡ä¿¡æ¯æ›´åŠ å‡†ç¡®å¯é ï¼Œä¾¿äºç”¨æˆ·äº†è§£æ ‡ç­¾çš„å®é™…ä½¿ç”¨æƒ…å†µ

#### ğŸ·ï¸ æ ‡ç­¾ç•Œé¢ä¼˜åŒ– (2025-07-03)
- **ç•Œé¢ç®€åŒ–**ï¼šæ ‡ç­¾é¡µé¢é‡‡ç”¨æœ€å°åŒ–è®¾è®¡åŸåˆ™ï¼Œæå‡ç”¨æˆ·ä½“éªŒ
- **åŠŸèƒ½åˆ†ç¦»**ï¼š
  - **å½“å‰æ–‡ä»¶æ ‡ç­¾**ï¼šä¿ç•™åœ¨ä¸»ç•Œé¢ï¼Œä¾¿äºå¿«é€Ÿç®¡ç†å½“å‰æ–‡ä»¶çš„æ ‡ç­¾
  - **å…¨å±€æ ‡ç­¾ç®¡ç†**ï¼šç§»è‡³ç‹¬ç«‹å¼¹çª—ï¼Œé€šè¿‡"è®¾ç½®å…¨å±€æ ‡ç­¾"æŒ‰é’®è®¿é—®
- **å¼¹çª—ç®¡ç†**ï¼šå…¨å±€æ ‡ç­¾ç®¡ç†å¼¹çª—åŒ…å«å®Œæ•´åŠŸèƒ½ï¼š
  - æ ‡ç­¾ç»Ÿè®¡ä¿¡æ¯ï¼ˆæ€»æ•°ã€æ´»è·ƒã€æœªä½¿ç”¨ã€AIå»ºè®®ï¼‰
  - æ ‡ç­¾æœç´¢å’Œè¿‡æ»¤åŠŸèƒ½
  - æ–°å»ºã€ç¼–è¾‘ã€åˆ é™¤æ ‡ç­¾æ“ä½œ
  - å®Œæ•´çš„æ ‡ç­¾åˆ—è¡¨è¡¨æ ¼è§†å›¾
- **ç”¨æˆ·ä½“éªŒä¼˜åŒ–**ï¼šç•Œé¢æ›´æ¸…çˆ½ï¼ŒåŠŸèƒ½æ›´èšç„¦ï¼Œæ“ä½œæ›´ç›´è§‚
- **å“åº”å¼è®¾è®¡**ï¼šå¼¹çª—é‡‡ç”¨å¤§å°ºå¯¸è®¾è®¡(1200px)ï¼Œæä¾›å……è¶³çš„æ“ä½œç©ºé—´

#### ğŸ¤– AIæ™ºèƒ½é—®ç­”ç³»ç»Ÿ (2025-01-01)
- **RAGé—®ç­”åŠŸèƒ½**ï¼šåŸºäºæ£€ç´¢å¢å¼ºç”Ÿæˆ(RAG)çš„æ™ºèƒ½é—®ç­”ï¼ŒAIä¼šå…ˆæœç´¢ç›¸å…³ç¬”è®°ï¼Œå†åŸºäºå†…å®¹å›ç­”é—®é¢˜
- **ä¸Šä¸‹æ–‡ç†è§£**ï¼šAIåŠ©æ‰‹èƒ½ç†è§£é—®é¢˜å¹¶ä»ç¬”è®°åº“ä¸­æ£€ç´¢æœ€ç›¸å…³çš„å†…å®¹ä½œä¸ºå›ç­”ä¾æ®
- **æ™ºèƒ½å¯¹è¯ç•Œé¢**ï¼šç°ä»£åŒ–çš„å¯¹è¯ç•Œé¢ï¼Œæ”¯æŒæµå¼è¾“å‡ºå’Œæ‰“å­—æœºæ•ˆæœ
- **ç›¸å…³æ–‡æ¡£å±•ç¤º**ï¼šé—®ç­”ç»“æœä¼šæ˜¾ç¤ºå‚è€ƒçš„ç›¸å…³æ–‡æ¡£ï¼Œæä¾›é€æ˜çš„ä¿¡æ¯æ¥æº
- **æœ¬åœ°åŒ–éƒ¨ç½²**ï¼šå®Œå…¨åŸºäºæœ¬åœ°LLMæœåŠ¡ï¼Œç¡®ä¿æ•°æ®éšç§å’Œå®‰å…¨

#### ğŸ” æ™ºèƒ½æœç´¢ç³»ç»Ÿ (2024-12-28)
- **å¤šç§æœç´¢æ¨¡å¼**ï¼šæ”¯æŒå…³é”®è¯æœç´¢ã€è¯­ä¹‰æœç´¢å’Œæ··åˆæœç´¢
- **æœç´¢å†å²**ï¼šè‡ªåŠ¨è®°å½•æœç´¢å†å²ï¼Œæ”¯æŒå¿«é€Ÿé‡å¤æœç´¢
- **çƒ­é—¨æŸ¥è¯¢**ï¼šæ˜¾ç¤ºæœ€å¸¸ç”¨çš„æœç´¢è¯ï¼Œæä¾›æœç´¢å»ºè®®
- **æœç´¢ç»Ÿè®¡**ï¼šæ˜¾ç¤ºæœç´¢ç»“æœæ•°é‡ã€å“åº”æ—¶é—´ç­‰ç»Ÿè®¡ä¿¡æ¯
- **ç›¸ä¼¼åº¦é˜ˆå€¼**ï¼šè¯­ä¹‰æœç´¢æ”¯æŒè‡ªå®šä¹‰ç›¸ä¼¼åº¦é˜ˆå€¼ï¼Œæé«˜æœç´¢ç²¾åº¦

#### ğŸš€ ç³»ç»Ÿæ€§èƒ½ä¼˜åŒ– (2024-12-27)
- **å“åº”é€Ÿåº¦æå‡**ï¼šç³»ç»ŸçŠ¶æ€æ¥å£å“åº”æ—¶é—´ä»20ç§’ä¼˜åŒ–åˆ°0.136ç§’ï¼Œæå‡99.3%
- **ç¼“å­˜æœºåˆ¶**ï¼šå¤šå±‚æ¬¡ç¼“å­˜ç­–ç•¥ï¼Œæ˜¾è‘—æå‡ç³»ç»Ÿå“åº”é€Ÿåº¦
- **ä¼°ç®—ç®—æ³•**ï¼šæ™ºèƒ½ä¼°ç®—æ›¿ä»£è€—æ—¶çš„ç²¾ç¡®æŸ¥è¯¢ï¼Œåœ¨ä¿è¯å‡†ç¡®æ€§çš„åŒæ—¶å¤§å¹…æå‡æ€§èƒ½
- **ç•Œé¢ä¼˜åŒ–**ï¼šè§£å†³é¢‘ç¹è¯·æ±‚å’Œç•Œé¢å¡é¡¿é—®é¢˜ï¼Œé¡µé¢å“åº”æ—¶é—´æå‡95%

#### âš¡ ChromaDBå‘é‡ä¼˜åŒ–æ¶æ„ (2025-01-01)
- **åŒå­˜å‚¨æ¶æ„**ï¼šSQLiteå­˜å‚¨å…ƒæ•°æ®ï¼ŒChromaDBä¸“é—¨å­˜å‚¨å‘é‡æ•°æ®ï¼Œå®ç°æœ€ä½³æ€§èƒ½
- **é«˜æ€§èƒ½å‘é‡æœç´¢**ï¼šä½¿ç”¨ChromaDBçš„ä¸“ä¸šå‘é‡ç´¢å¼•ï¼Œæœç´¢é€Ÿåº¦æå‡10å€ä»¥ä¸Š
- **æ™ºèƒ½æ•°æ®åŒæ­¥**ï¼šè‡ªåŠ¨åŒæ­¥SQLiteå’ŒChromaDBæ•°æ®ï¼Œç¡®ä¿ä¸€è‡´æ€§
- **å‘é‡æ•°æ®éš”ç¦»**ï¼šå‘é‡æ•°æ®ä¸å…ƒæ•°æ®åˆ†ç¦»ï¼Œå‡å°‘SQLiteè´Ÿæ‹…ï¼Œæå‡æ•´ä½“æ€§èƒ½
- **æ‰¹é‡å‘é‡æ“ä½œ**ï¼šæ”¯æŒæ‰¹é‡æ·»åŠ ã€åˆ é™¤å’Œæ›´æ–°å‘é‡ï¼Œæé«˜ç´¢å¼•æ„å»ºæ•ˆç‡
- **å®¹é”™æœºåˆ¶**ï¼šChromaDBè¿æ¥å¤±è´¥æ—¶è‡ªåŠ¨é™çº§åˆ°åŸºç¡€åŠŸèƒ½ï¼Œä¿è¯ç³»ç»Ÿå¯ç”¨æ€§
- **ä¸“ä¸šå‘é‡å­˜å‚¨**ï¼šåˆ©ç”¨ChromaDBçš„åŸç”Ÿå‘é‡å­˜å‚¨èƒ½åŠ›ï¼Œä¼˜åŒ–å†…å­˜ä½¿ç”¨å’ŒæŸ¥è¯¢æ€§èƒ½
- **å‘é‡ç‰ˆæœ¬ç®¡ç†**ï¼šæ”¯æŒå‘é‡æ•°æ®çš„ç‰ˆæœ¬æ§åˆ¶å’Œå¢é‡æ›´æ–°

#### âš¡ å¯åŠ¨æµç¨‹æ€§èƒ½ä¼˜åŒ– (2025-01-01)
- **å¿«é€Ÿå¯åŠ¨**ï¼šç³»ç»Ÿå¯åŠ¨æ—¶é—´ä»30-40ç§’ä¼˜åŒ–åˆ°3-5ç§’ï¼Œç«‹å³å¯ç”¨
- **åå°ç´¢å¼•æ„å»º**ï¼šå¯åŠ¨æ—¶è‡ªåŠ¨æ‰«ææ–‡ä»¶å¹¶åˆ›å»ºåå°ä»»åŠ¡ï¼Œå‘é‡ç´¢å¼•åœ¨åå°å¼‚æ­¥å¤„ç†
- **æ™ºèƒ½æ–‡ä»¶æ‰«æ**ï¼šè‡ªåŠ¨æ£€æµ‹æ–‡ä»¶å˜åŒ–ï¼Œåªä¸ºæ–°æ–‡ä»¶æˆ–ä¿®æ”¹çš„æ–‡ä»¶åˆ›å»ºç´¢å¼•ä»»åŠ¡
- **éé˜»å¡å¯åŠ¨**ï¼šæ•°æ®åº“åˆå§‹åŒ–å®Œæˆåç«‹å³å¯åŠ¨åº”ç”¨ï¼Œä¸ç­‰å¾…ç´¢å¼•æ„å»ºå®Œæˆ
- **åå°ä»»åŠ¡å¤„ç†**ï¼šåœ¨å•ç‹¬çº¿ç¨‹ä¸­å¤„ç†å‘é‡ç´¢å¼•ï¼Œä¸å½±å“ç”¨æˆ·ä½¿ç”¨
- **çŠ¶æ€ç›‘æ§**ï¼šè¯¦ç»†çš„å¯åŠ¨å’Œå¤„ç†æ—¥å¿—ï¼Œæ–¹ä¾¿ç›‘æ§è¿›åº¦
- **è‡ªåŠ¨åŒ–å¤„ç†**ï¼šæ— éœ€æ‰‹åŠ¨å¹²é¢„ï¼Œç³»ç»Ÿè‡ªåŠ¨å®Œæˆæ‰€æœ‰ä¼˜åŒ–æµç¨‹
- **é…ç½®ä¿®å¤**ï¼šä¿®å¤åµŒå…¥æ¨¡å‹é…ç½®ï¼Œç°åœ¨æ­£ç¡®ä½¿ç”¨Docker Composeä¸­æŒ‡å®šçš„æ¨¡å‹åç§°

#### ğŸš€ æ–‡ä»¶ä¿å­˜æ€§èƒ½ä¼˜åŒ– (2025-01-01)
- **å¿«é€Ÿä¿å­˜æ¨¡å¼**ï¼šæ–‡ä»¶ä¿å­˜é€»è¾‘ä¼˜åŒ–ï¼Œå…ˆä¿å­˜æ–‡ä»¶åˆ°ç£ç›˜ï¼Œç«‹å³è¿”å›å“åº”
- **åå°ä»»åŠ¡é˜Ÿåˆ—**ï¼šå‘é‡åŒ–å’Œç´¢å¼•æ›´æ–°æ”¹ä¸ºåå°å¼‚æ­¥å¤„ç†ï¼Œé¿å…ä¿å­˜è¶…æ—¶
- **è‡ªåŠ¨ä»»åŠ¡å¤„ç†**ï¼šæ–‡ä»¶å˜åŠ¨æ—¶è‡ªåŠ¨è§¦å‘åå°ä»»åŠ¡å¤„ç†ï¼Œæ— éœ€æ‰‹åŠ¨å¹²é¢„
- **æ™ºèƒ½å¯åŠ¨æœºåˆ¶**ï¼šç³»ç»Ÿè‡ªåŠ¨æ£€æµ‹å¹¶å¯åŠ¨åå°ä»»åŠ¡å¤„ç†å™¨ï¼Œç¡®ä¿ä»»åŠ¡åŠæ—¶å¤„ç†
- **è‡ªåŠ¨ä¿å­˜ä¼˜åŒ–**ï¼šå‰ç«¯è‡ªåŠ¨ä¿å­˜é—´éš”è°ƒæ•´ä¸º30ç§’ï¼Œå‡å°‘æœåŠ¡å™¨å‹åŠ›
- **æ™ºèƒ½åˆ‡æ¢ä¿å­˜**ï¼šæ–‡ä»¶åˆ‡æ¢æ—¶è‡ªåŠ¨ä¿å­˜æœªä¿å­˜çš„ä¿®æ”¹ï¼Œé¿å…æ•°æ®ä¸¢å¤±
- **ä»»åŠ¡é‡è¯•æœºåˆ¶**ï¼šåå°ä»»åŠ¡æ”¯æŒå¤±è´¥é‡è¯•ï¼Œæœ€å¤šé‡è¯•3æ¬¡
- **ä»»åŠ¡çŠ¶æ€è·Ÿè¸ª**ï¼šå®Œæ•´çš„ä»»åŠ¡çŠ¶æ€ç®¡ç†ï¼ˆå¾…å¤„ç†/å¤„ç†ä¸­/å·²å®Œæˆ/å¤±è´¥ï¼‰

#### ğŸ—„ï¸ æ•°æ®åº“ç»“æ„ä¼˜åŒ– (2025-01-01)
- **å†—ä½™å­—æ®µæ¸…ç†**ï¼šç§»é™¤filesè¡¨ä¸­çš„å†—ä½™tagså­—æ®µï¼Œé¿å…æ•°æ®ä¸ä¸€è‡´
- **è§„èŒƒåŒ–è®¾è®¡**ï¼šæ ‡ç­¾å…³ç³»ç»Ÿä¸€é€šè¿‡tagsè¡¨å’Œfile_tagså…³è”è¡¨ç®¡ç†
- **æ¶æ„ä¸€è‡´æ€§**ï¼šç¡®ä¿å‰åç«¯ç±»å‹å®šä¹‰ä¸æ•°æ®åº“ç»“æ„å®Œå…¨ä¸€è‡´
- **æ•°æ®å®Œæ•´æ€§**ï¼šé€šè¿‡å¤–é”®çº¦æŸå’Œè§„èŒƒåŒ–è®¾è®¡ä¿è¯æ•°æ®å®Œæ•´æ€§
- **æ€§èƒ½ä¼˜åŒ–**ï¼šå‡å°‘å†—ä½™å­˜å‚¨ï¼Œä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½å’Œå­˜å‚¨ç©ºé—´
- **ç»´æŠ¤ç®€åŒ–**ï¼šç»Ÿä¸€çš„æ ‡ç­¾ç®¡ç†é€»è¾‘ï¼Œç®€åŒ–ä»£ç ç»´æŠ¤å’Œæ‰©å±•

#### ğŸš€ åµŒå…¥æ¶æ„é‡æ„ (2025-07-01)
- **çµæ´»åµŒå…¥æ¥å£**ï¼šç§»é™¤LangChainä¾èµ–ï¼Œä½¿ç”¨æ ‡å‡† `/v1/embeddings` æ¥å£
- **æœåŠ¡å…¼å®¹æ€§**ï¼šæ”¯æŒOllamaã€OpenAIåŠä»»ä½•å…¼å®¹OpenAIæ ¼å¼çš„åµŒå…¥æœåŠ¡
- **è¯­ä¹‰æœç´¢å®Œå–„**ï¼šåµŒå…¥å’Œå‘é‡æœç´¢åŠŸèƒ½å®Œå…¨æ­£å¸¸å·¥ä½œ
- **æ¶æ„ä¼˜åŒ–**ï¼šé€šè¿‡ç¯å¢ƒå˜é‡è½»æ¾åˆ‡æ¢ä¸åŒAIæœåŠ¡æä¾›å•†
- **ç³»ç»Ÿç¨³å®šæ€§**ï¼šè·¯å¾„é…ç½®ä¿®å¤ï¼Œæ•°æ®åº“æ“ä½œæ­£å¸¸ï¼Œæœç´¢åŠŸèƒ½å®Œå–„

#### å¯åŠ¨æ—¶è‡ªåŠ¨é‡å»ºç´¢å¼•æœºåˆ¶
- **å®Œå…¨é‡å»ºç­–ç•¥**ï¼šæ¯æ¬¡å®¹å™¨é‡å¯æ—¶è‡ªåŠ¨åˆ é™¤ç°æœ‰æ•°æ®åº“å’Œå‘é‡åº“
- **é¿å…æ•°æ®ä¸ä¸€è‡´**ï¼šæ¶ˆé™¤æ•°æ®åº“çŠ¶æ€ä¸ä¸€è‡´å¯¼è‡´çš„å„ç§é”™è¯¯
- **ç®€åŒ–ç»´æŠ¤é€»è¾‘**ï¼šä¸å†éœ€è¦å¤æ‚çš„å¢é‡æ›´æ–°å’ŒçŠ¶æ€æ£€æŸ¥
- **å¯åŠ¨æµç¨‹**ï¼š
  1. æ¸…ç†ç°æœ‰SQLiteæ•°æ®åº“æ–‡ä»¶
  2. æ¸…ç†ç°æœ‰å‘é‡æ•°æ®åº“ç›®å½•  
  3. é‡æ–°åˆ›å»ºæ•°æ®åº“è¡¨ç»“æ„
  4. æ‰«ænotesç›®å½•ä¸­çš„æ‰€æœ‰æ–‡ä»¶
  5. é‡å»ºSQLiteç´¢å¼•
  6. é‡å»ºå‘é‡ç´¢å¼•å’ŒåµŒå…¥
- **å¯åŠ¨æ—¥å¿—**ï¼šè¯¦ç»†çš„å¯åŠ¨è¿›åº¦æ—¥å¿—ï¼Œæ–¹ä¾¿ç›‘æ§é‡å»ºè¿‡ç¨‹

#### æ™ºèƒ½æœç´¢åŠŸèƒ½
- **å¤šç§æœç´¢æ¨¡å¼**ï¼šå…³é”®è¯æœç´¢ã€è¯­ä¹‰æœç´¢ã€æ··åˆæœç´¢ä¸‰ç§æ¨¡å¼
- **å…³é”®è¯æœç´¢**ï¼šåŸºäºSQLite LIKEæ¨¡ç³Šæœç´¢ï¼Œè¿”å›æ‰€æœ‰åŒ¹é…æ–‡ä»¶
- **è¯­ä¹‰æœç´¢**ï¼šåŸºäºå‘é‡ç›¸ä¼¼åº¦ï¼Œè¿”å›å‰10ä¸ªæœ€ç›¸å…³æ–‡ä»¶ï¼Œæ˜¾ç¤ºç›¸ä¼¼åº¦è¯„åˆ†
- **æ··åˆæœç´¢**ï¼šç»“åˆå…³é”®è¯å’Œè¯­ä¹‰æœç´¢ç»“æœï¼Œæ™ºèƒ½å»é‡æ’åº
- **æœç´¢å†å²**ï¼šè®°å½•æ‰€æœ‰æœç´¢æŸ¥è¯¢ï¼Œæ”¯æŒå¿«é€Ÿé‡æ–°æœç´¢
- **çƒ­é—¨æœç´¢**ï¼šç»Ÿè®¡æœ€å¸¸ç”¨çš„æœç´¢æŸ¥è¯¢
- **å¿«æ·é”®æ”¯æŒ**ï¼šCtrl+K å¿«é€Ÿæ‰“å¼€æœç´¢ï¼ŒESC å…³é—­æœç´¢çª—å£
- **å“åº”æ—¶é—´ç»Ÿè®¡**ï¼šå®æ—¶æ˜¾ç¤ºæœç´¢è€—æ—¶å’Œç»“æœæ•°é‡
- **æœç´¢éªŒè¯**ï¼šå‰ç«¯å®Œå…¨æ‹¦æˆªå°‘äº2ä¸ªå­—ç¬¦çš„æœç´¢ï¼Œæä¾›å‹å¥½æç¤º
- **è¾“å…¥æ¡†ä¿®å¤**ï¼šä¿®å¤æœç´¢è¾“å…¥æ¡†è¾“å…¥ç¬¬ä¸€ä¸ªå­—ç¬¦åç«‹å³ç¦ç”¨çš„é—®é¢˜ï¼Œç°åœ¨å¯ä»¥æ­£å¸¸è¿ç»­è¾“å…¥
- **æ•°æ®åº“ä¿®å¤**ï¼šä¿®å¤SQLiteæ•°æ®åº“æŸåå¯¼è‡´æœç´¢åŠŸèƒ½å¤±æ•ˆçš„é—®é¢˜ï¼Œé€šè¿‡å¼ºåˆ¶é‡å»ºæ•°æ®åº“å’Œç´¢å¼•æ¢å¤æ­£å¸¸
- **ç´¢å¼•åŒæ­¥æœºåˆ¶**ï¼šå®ç°ç¬”è®°å†…å®¹æ›´æ–°æ—¶çš„è‡ªåŠ¨ç´¢å¼•åŒæ­¥ï¼Œé‡‡ç”¨"åŒæ­¥ä¿å­˜ + å¼‚æ­¥ç´¢å¼•"æ¨¡å¼ç¡®ä¿æœç´¢ç»“æœå®æ—¶æ€§

#### æ–‡ä»¶æ ‘é€‰ä¸­çŠ¶æ€åŠŸèƒ½
- **æ–‡ä»¶å¤¹é€‰ä¸­çŠ¶æ€**ï¼šç‚¹å‡»æ–‡ä»¶å¤¹æ—¶ä¼šæ˜¾ç¤ºé€‰ä¸­çŠ¶æ€ï¼Œä¾¿äºè¯†åˆ«å½“å‰å·¥ä½œç›®å½•
- **å½“å‰ç›®å½•æ˜¾ç¤º**ï¼šåœ¨æ–‡ä»¶æ ‘é¡¶éƒ¨æ˜¾ç¤ºå½“å‰é€‰ä¸­çš„ç›®å½•è·¯å¾„
- **æ™ºèƒ½æ–°å»º**ï¼šæ–°å»ºæ–‡ä»¶/æ–‡ä»¶å¤¹æ—¶ä¼šåœ¨å½“å‰é€‰ä¸­çš„ç›®å½•ä¸‹åˆ›å»º
- **è§†è§‰åé¦ˆ**ï¼šé€‰ä¸­çš„æ–‡ä»¶/æ–‡ä»¶å¤¹æœ‰æ˜æ˜¾çš„è“è‰²èƒŒæ™¯æ ‡è¯†
- **ç›®å½•æŒ‡ç¤º**ï¼šåˆ›å»ºå¯¹è¯æ¡†ä¸­ä¼šæ˜ç¡®æ˜¾ç¤ºå°†åœ¨å“ªä¸ªç›®å½•ä¸‹åˆ›å»ºæ–°é¡¹ç›®
- **åŒå‡»å±•å¼€**ï¼šåŒå‡»æ–‡ä»¶å¤¹åç§°å¯ä»¥å±•å¼€æˆ–æ”¶ç¼©ç›®å½•ï¼Œæ— éœ€ç‚¹å‡»ç®­å¤´
- **å…‰æ ‡æç¤º**ï¼šæ–‡ä»¶å¤¹æ˜¾ç¤ºæ‰‹å‹å…‰æ ‡ï¼Œæç¤ºç”¨æˆ·å¯ä»¥åŒå‡»æ“ä½œ

#### ç¼–è¾‘å™¨å¢å¼ºåŠŸèƒ½
- **è‡ªåŠ¨ä¿å­˜ä¼˜åŒ–**ï¼šä¿®æ”¹ä¸ºæ¯30ç§’è‡ªåŠ¨ä¿å­˜ç¼–è¾‘å†…å®¹ï¼Œå‡å°‘é¢‘ç¹ä¿å­˜
- **æ™ºèƒ½åˆ‡æ¢ä¿å­˜**ï¼šåˆ‡æ¢æ–‡ä»¶æ—¶è‡ªåŠ¨ä¿å­˜å½“å‰æœªä¿å­˜çš„ä¿®æ”¹
- **Ctrl+Så¿«æ·é”®**ï¼šæ”¯æŒä¼ ç»Ÿçš„ä¿å­˜å¿«æ·é”®
- **ä¿å­˜çŠ¶æ€æŒ‡ç¤º**ï¼šå®æ—¶æ˜¾ç¤ºä¿å­˜çŠ¶æ€ï¼ˆå·²ä¿å­˜/ä¿å­˜ä¸­/æœªä¿å­˜ï¼‰

#### æ–‡ä»¶æ“ä½œä¼˜åŒ–
- **æ‹–æ‹½ç§»åŠ¨**ï¼šæ”¯æŒæ–‡ä»¶å’Œæ–‡ä»¶å¤¹çš„æ‹–æ‹½ç§»åŠ¨
- **å³é”®èœå•**ï¼šæä¾›æ–°å»ºã€é‡å‘½åã€åˆ é™¤ç­‰å¿«æ·æ“ä½œ
- **è‡ªåŠ¨å±•å¼€**ï¼šæ“ä½œå®Œæˆåè‡ªåŠ¨å±•å¼€ç›¸å…³ç›®å½•

#### æ–‡ä»¶ç®¡ç†åŠŸèƒ½å¢å¼º
- **å›¾æ ‡åŒ–æ“ä½œ**ï¼šå°†æ–°å»ºæ–‡ä»¶ã€æ–°å»ºæ–‡ä»¶å¤¹æŒ‰é’®æ”¹ä¸ºå›¾æ ‡å½¢å¼ï¼ŒèŠ‚çœç•Œé¢ç©ºé—´
- **åˆ é™¤åŠŸèƒ½**ï¼šæ·»åŠ åˆ é™¤å›¾æ ‡æŒ‰é’®ï¼Œæ”¯æŒåˆ é™¤é€‰ä¸­çš„æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹
- **ç¡®è®¤æœºåˆ¶**ï¼šåˆ é™¤æ“ä½œæœ‰ç¡®è®¤å¯¹è¯æ¡†ï¼Œé¿å…è¯¯åˆ ï¼Œè¯´æ˜æ“ä½œä¸å¯æ’¤é”€
- **å®Œæ•´åˆ é™¤**ï¼šåˆ é™¤æ“ä½œåŒæ—¶åˆ é™¤ç‰©ç†æ–‡ä»¶ã€æ•°æ®åº“è®°å½•å’Œå‘é‡ç´¢å¼•ï¼Œç¡®ä¿æ•°æ®ä¸€è‡´æ€§
- **åˆ·æ–°åŠŸèƒ½**ï¼šæ·»åŠ åˆ·æ–°å›¾æ ‡æŒ‰é’®ï¼Œå¯ä»¥é‡æ–°è¯»å–æ–‡ä»¶ç³»ç»Ÿå¹¶æ›´æ–°æ–‡ä»¶æ ‘
- **é‡æ–°ç´¢å¼•**ï¼šæ·»åŠ é‡æ–°æ„å»ºç´¢å¼•åŠŸèƒ½ï¼Œæ¸…ç©ºæ‰€æœ‰æ•°æ®åº“å’Œå‘é‡åº“åé‡æ–°æ‰«ææ„å»º
- **æ™ºèƒ½æç¤º**ï¼šæ‰€æœ‰å›¾æ ‡æŒ‰é’®éƒ½æœ‰Tooltipæç¤ºè¯´æ˜åŠŸèƒ½
- **çŠ¶æ€æ˜¾ç¤º**ï¼šåœ¨æ–‡ä»¶æ ‘é¡¶éƒ¨æ˜¾ç¤ºå½“å‰ç›®å½•å’Œå·²é€‰ä¸­çš„æ–‡ä»¶/æ–‡ä»¶å¤¹è·¯å¾„
- **æŒ‰é’®çŠ¶æ€**ï¼šåˆ é™¤æŒ‰é’®ä»…åœ¨æœ‰é€‰ä¸­é¡¹æ—¶å¯ç”¨ï¼Œé¿å…æ— æ•ˆæ“ä½œ

### æŠ€æœ¯æ¶æ„

- **å‰ç«¯**ï¼šReact + TypeScript + Ant Design
- **åç«¯**ï¼šFastAPI + Python
- **æ•°æ®åº“**ï¼šSQLite + ChromaDB
- **AIé›†æˆ**ï¼šæ ‡å‡† `/v1/embeddings` æ¥å£ï¼Œæ”¯æŒOllamaã€OpenAIç­‰å¤šç§AIæœåŠ¡
- **éƒ¨ç½²**ï¼šDocker + Docker Compose

## ğŸš€ æ€§èƒ½ä¼˜åŒ–

### è¯­ä¹‰æ£€ç´¢æ€§èƒ½ä¼˜åŒ–
æˆ‘ä»¬å¯¹è¯­ä¹‰æ£€ç´¢è¿›è¡Œäº†å…¨é¢çš„æ€§èƒ½ä¼˜åŒ–ï¼Œæ˜¾è‘—æå‡äº†æœç´¢é€Ÿåº¦ï¼š

#### ä¼˜åŒ–æªæ–½
1. **HTTPè¶…æ—¶ä¼˜åŒ–**ï¼šä»30ç§’é™ä½åˆ°10ç§’ï¼Œå‡å°‘ä¸å¿…è¦ç­‰å¾…
2. **é…ç½®å‚æ•°ä¼˜åŒ–**ï¼š
   - åµŒå…¥ç»´åº¦ï¼šä»1536è°ƒæ•´ä¸º1024ï¼ˆåŒ¹é…BGEæ¨¡å‹å®é™…ç»´åº¦ï¼‰
   - è¯­ä¹‰æœç´¢é˜ˆå€¼ï¼šä¿æŒ1.0ï¼ˆè·ç¦»é˜ˆå€¼ï¼Œè¶Šå°è¶Šä¸¥æ ¼ï¼‰
3. **æŸ¥è¯¢å‘é‡ç¼“å­˜**ï¼šå®ç°LRUç¼“å­˜æœºåˆ¶ï¼Œé¿å…é‡å¤è®¡ç®—
4. **æ€§èƒ½ç›‘æ§**ï¼šæ·»åŠ è¯¦ç»†çš„æ€§èƒ½æ—¥å¿—ï¼Œä¾¿äºé—®é¢˜è¯Šæ–­

#### æ€§èƒ½æå‡æ•ˆæœ
- **æœç´¢é€Ÿåº¦æå‡**ï¼šçº¦19%çš„æ€§èƒ½æå‡ï¼ˆä»1357msé™è‡³1101msï¼‰
- **ç¼“å­˜æœºåˆ¶**ï¼šç›¸åŒæŸ¥è¯¢å¯å¤ç”¨å‘é‡ï¼Œå‡å°‘è®¡ç®—å¼€é”€
- **ç›‘æ§å®Œå–„**ï¼šè¯¦ç»†çš„è€—æ—¶ç»Ÿè®¡ï¼Œä¾¿äºæ€§èƒ½è°ƒä¼˜

#### æŠ€æœ¯ç»†èŠ‚
- **åµŒå…¥æ¨¡å‹**ï¼šBGE-large-zh-v1.5ï¼ˆ1024ç»´ä¸­æ–‡åµŒå…¥ï¼‰
- **å‘é‡æ•°æ®åº“**ï¼šChromaDB with LangChainé›†æˆ
- **ç¼“å­˜ç­–ç•¥**ï¼šMD5å“ˆå¸Œé”® + LRUæ·˜æ±°ç­–ç•¥
- **è¶…æ—¶æ§åˆ¶**ï¼š10ç§’HTTPè¯·æ±‚è¶…æ—¶

#### æœç´¢æ€§èƒ½å¯¹æ¯”
| ä¼˜åŒ–é¡¹ç›® | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æå‡ |
|---------|--------|--------|------|
| æœç´¢è€—æ—¶ | 1357ms | 1101ms | 19% â†‘ |
| HTTPè¶…æ—¶ | 30s | 10s | 67% â†“ |
| åµŒå…¥ç»´åº¦ | 1536 | 1024 | åŒ¹é…æ¨¡å‹ |
| æœç´¢é˜ˆå€¼ | 1.0 | 1.0 | è·ç¦»é˜ˆå€¼ |

#### æ€§èƒ½ç“¶é¢ˆåˆ†æ
è¯­ä¹‰æ£€ç´¢çš„ä¸»è¦æ€§èƒ½ç“¶é¢ˆåŒ…æ‹¬ï¼š
1. **åµŒå…¥æ¨¡å‹æ¨ç†**ï¼šæ¯æ¬¡æœç´¢éƒ½éœ€è¦è°ƒç”¨AIæ¨¡å‹ç”ŸæˆæŸ¥è¯¢å‘é‡
2. **ç½‘ç»œå»¶è¿Ÿ**ï¼šDockerå®¹å™¨è®¿é—®å®¿ä¸»æœºOllamaæœåŠ¡çš„ç½‘ç»œå¼€é”€
3. **å‘é‡è®¡ç®—**ï¼šChromaDBè¿›è¡Œç›¸ä¼¼åº¦è®¡ç®—çš„æ—¶é—´
4. **æ•°æ®åº“æŸ¥è¯¢**ï¼šéªŒè¯æœç´¢ç»“æœæ–‡ä»¶å­˜åœ¨æ€§çš„SQLæŸ¥è¯¢

#### æœªæ¥ä¼˜åŒ–æ–¹å‘
1. **æ›´å¿«çš„åµŒå…¥æ¨¡å‹**ï¼šè€ƒè™‘ä½¿ç”¨æ›´è½»é‡çº§çš„ä¸­æ–‡åµŒå…¥æ¨¡å‹
2. **æœ¬åœ°åµŒå…¥æœåŠ¡**ï¼šå°†åµŒå…¥æ¨¡å‹é›†æˆåˆ°åç«¯æœåŠ¡ä¸­ï¼Œå‡å°‘ç½‘ç»œè°ƒç”¨
3. **ç»“æœç¼“å­˜**ï¼šç¼“å­˜æœç´¢ç»“æœï¼Œé¿å…é‡å¤çš„å‘é‡è®¡ç®—
4. **æ‰¹é‡æŸ¥è¯¢ä¼˜åŒ–**ï¼šä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢ï¼Œå‡å°‘SQLè°ƒç”¨æ¬¡æ•°

## ç³»ç»Ÿæ¶æ„å›¾

### æ•´ä½“æ¶æ„æµç¨‹å›¾
```mermaid
graph TB
    subgraph "ç”¨æˆ·ç•Œé¢å±‚"
        UI["Reactå‰ç«¯ç•Œé¢"]
        Editor["Markdownç¼–è¾‘å™¨"]
        Search["æœç´¢ç•Œé¢"]
        Chat["AIé—®ç­”ç•Œé¢"]
        GraphView["é“¾æ¥å…³ç³»å›¾è°±ç•Œé¢"]
    end

    subgraph "APIæœåŠ¡å±‚"
        API["FastAPIåç«¯æœåŠ¡"]
        FileAPI["æ–‡ä»¶ç®¡ç†API"]
        SearchAPI["æœç´¢API"]
        AIAPI["AIé—®ç­”API"]
        GraphAPI["é“¾æ¥å›¾è°±API"]
    end

    subgraph "ä¸šåŠ¡é€»è¾‘å±‚"
        FileService["æ–‡ä»¶æœåŠ¡"]
        SearchService["æœç´¢æœåŠ¡"]
        AIService["AIæœåŠ¡"]
        EmbeddingService["åµŒå…¥æœåŠ¡"]
        LinkService["é“¾æ¥æœåŠ¡"]
        TagService["æ ‡ç­¾æœåŠ¡"]
    end

    subgraph "æ•°æ®å­˜å‚¨å±‚"
        SQLiteDB["SQLiteæ•°æ®åº“"]
        ChromaDB["Chromaå‘é‡åº“"]
        FileSystemStore["æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ"]
    end

    subgraph "AIæ¨¡å‹å±‚"
        LocalLLM["æœ¬åœ°LLMæœåŠ¡ (OpenAIå…¼å®¹)"]
        EmbeddingModel["åµŒå…¥æ¨¡å‹"]
    end

    %% ç”¨æˆ·ç•Œé¢åˆ°APIçš„è¿æ¥
    UI --> API
    Editor --> FileAPI
    Search --> SearchAPI
    Chat --> AIAPI
    GraphView --> GraphAPI

    %% APIåˆ°ä¸šåŠ¡é€»è¾‘çš„è¿æ¥
    FileAPI --> FileService
    SearchAPI --> SearchService
    AIAPI --> AIService
    GraphAPI --> LinkService

    %% ä¸šåŠ¡é€»è¾‘åˆ°æ•°æ®å­˜å‚¨çš„è¿æ¥
    FileService --> SQLiteDB
    FileService --> FileSystemStore
    SearchService --> SQLiteDB
    SearchService --> ChromaDB
    AIService --> ChromaDB
    EmbeddingService --> ChromaDB
    LinkService --> SQLiteDB
    TagService --> SQLiteDB

    %% ä¸šåŠ¡é€»è¾‘åˆ°AIæ¨¡å‹çš„è¿æ¥
    AIService --> LocalLLM
    EmbeddingService --> EmbeddingModel

    %% æ•°æ®æµå‘
    FileService --> EmbeddingService
    EmbeddingService --> SearchService
    TagService --> LinkService
```

### æ ¸å¿ƒä¸šåŠ¡æµç¨‹å›¾
```mermaid
graph TD
    A[ç”¨æˆ·åˆ›å»º/ç¼–è¾‘ç¬”è®°] --> B[ä¿å­˜Markdownæ–‡ä»¶]
    B --> C[è§£ææ–‡ä»¶å†…å®¹]
    C --> D[æå–åŒå‘é“¾æ¥]
    C --> E[æ–‡æœ¬åˆ†å—å¤„ç†]
    C --> F[æ ‡ç­¾æå–]
    
    D --> G[æ›´æ–°é“¾æ¥ç´¢å¼•]
    E --> H[ç”ŸæˆåµŒå…¥å‘é‡]
    F --> I[æ›´æ–°æ ‡ç­¾è¡¨]
    
    G --> J[å­˜å‚¨åˆ°SQLite]
    H --> K[å­˜å‚¨åˆ°ChromaDB]
    I --> J
    
    %% æœç´¢æµç¨‹
    L[ç”¨æˆ·æœç´¢] --> M{æœç´¢ç±»å‹}
    M -->|å…³é”®è¯æœç´¢| N[å…¨æ–‡æœç´¢SQLite]
    M -->|è¯­ä¹‰æœç´¢| O[å‘é‡æœç´¢ChromaDB]
    M -->|æ··åˆæœç´¢| P[ç»“åˆä¸¤ç§æœç´¢]
    
    N --> Q[è¿”å›æœç´¢ç»“æœ]
    O --> Q
    P --> Q
    
    %% AIé—®ç­”æµç¨‹
    R[ç”¨æˆ·æé—®] --> S[é—®é¢˜å‘é‡åŒ–]
    S --> T[æ£€ç´¢ç›¸å…³æ–‡æ¡£]
    T --> U[æ„å»ºä¸Šä¸‹æ–‡]
    U --> V[è°ƒç”¨æœ¬åœ°LLM]
    V --> W[ç”Ÿæˆå›ç­”]
    W --> X[è¿”å›ç­”æ¡ˆå’Œæ¥æº]
    
    %% é“¾æ¥å›¾è°±æµç¨‹
    Y[æŸ¥çœ‹é“¾æ¥å›¾è°±] --> Z[è·å–é“¾æ¥å…³ç³»]
    Z --> AA[ç”Ÿæˆå›¾è°±æ•°æ®]
    AA --> BB[å¯è§†åŒ–å±•ç¤º]
```

### ç¬”è®°æ›´æ–°å·¥ä½œæµç¨‹

å½“ç”¨æˆ·ä¿®æ”¹å¹¶ä¿å­˜ä¸€ç¯‡ç¬”è®°æ—¶ï¼Œç³»ç»Ÿä¼šè§¦å‘ä¸€ç³»åˆ—åŒæ­¥å’Œå¼‚æ­¥æ“ä½œæ¥ä¿è¯æ•°æ®ä¸€è‡´æ€§ã€‚

```mermaid
sequenceDiagram
    participant User as ç”¨æˆ·
    participant FE as å‰ç«¯ç¼–è¾‘å™¨
    participant API as åç«¯API
    participant BG as BackgroundTasks (åå°ä»»åŠ¡)

    User->>FE: ä¿®æ”¹ç¬”è®°å†…å®¹å¹¶ä¿å­˜
    FE->>API: PUT /files/{path}<br/>å‘é€æ–°å†…å®¹

    Note over API: åŒæ­¥ä¿å­˜ (ç«‹å³å“åº”)
    API->>FileSystemStore: 1. æ›´æ–° .md æ–‡ä»¶
    API->>SQLiteDB: 2. æ›´æ–° files è¡¨
    Note right of SQLiteDB: FTS5ç´¢å¼•é€šè¿‡è§¦å‘å™¨è‡ªåŠ¨æ›´æ–°
    API-->>FE: è¿”å› "ä¿å­˜æˆåŠŸ"
    FE-->>User: æ˜¾ç¤º "å·²ä¿å­˜"

    Note over API: å¼‚æ­¥å¤„ç† (åå°è¿è¡Œ)
    API-->>BG: 3. å¯åŠ¨åå°æ›´æ–°ä»»åŠ¡

    BG->>SQLiteDB: 4a. åˆ é™¤æ—§çš„é“¾æ¥/æ ‡ç­¾/å‘é‡è®°å½•
    BG->>ChromaDB: 4b. åˆ é™¤æ—§çš„å‘é‡

    BG->>BG: 5. é‡æ–°åˆ†å—/æå–é“¾æ¥/æå–æ ‡ç­¾

    BG->>EmbeddingService: 6. é‡æ–°ç”Ÿæˆå‘é‡

    BG->>SQLiteDB: 7a. å†™å…¥æ–°çš„é“¾æ¥/æ ‡ç­¾/å‘é‡è®°å½•
    BG->>ChromaDB: 7b. å†™å…¥æ–°çš„å‘é‡

    Note over BG: åå°ç´¢å¼•æ›´æ–°å®Œæˆ
```

### æ•°æ®æµè½¬å›¾
```mermaid
graph LR
    subgraph "æ•°æ®è¾“å…¥"
        MD[Markdownæ–‡ä»¶]
        Import[å¯¼å…¥æ–‡æ¡£]
        UserInput[ç”¨æˆ·è¾“å…¥]
    end

    subgraph "æ•°æ®å¤„ç†"
        Parser[Markdownè§£æå™¨]
        Chunker[æ–‡æœ¬åˆ†å—å™¨]
        LinkExtractor[é“¾æ¥æå–å™¨]
        TagExtractor[æ ‡ç­¾æå–å™¨]
        Embedder[å‘é‡åŒ–å™¨]
    end

    subgraph "æ•°æ®å­˜å‚¨"
        FileTable[(filesè¡¨)]
        LinkTable[(linksè¡¨)]
        TagTable[(tagsè¡¨)]
        FileTagTable[(file_tagsè¡¨)]
        EmbedTable[(embeddingsè¡¨)]
        VectorDB[(ChromaDB)]
        FileSystemStore[(æ–‡ä»¶ç³»ç»Ÿ)]
    end

    subgraph "æ•°æ®è¾“å‡º"
        SearchResult[æœç´¢ç»“æœ]
        AIAnswer[AIå›ç­”]
        LinkGraph[é“¾æ¥å›¾è°±]
        FileContent[æ–‡ä»¶å†…å®¹]
    end

    %% æ•°æ®è¾“å…¥åˆ°å¤„ç†
    MD --> Parser
    Import --> Parser
    UserInput --> Parser

    %% æ•°æ®å¤„ç†æµç¨‹
    Parser --> Chunker
    Parser --> LinkExtractor
    Parser --> TagExtractor
    Chunker --> Embedder

    %% æ•°æ®å­˜å‚¨
    Parser --> FileTable
    Parser --> FileSystemStore
    LinkExtractor --> LinkTable
    TagExtractor --> TagTable
    TagExtractor --> FileTagTable
    Embedder --> EmbedTable
    Embedder --> VectorDB

    %% æ•°æ®æŸ¥è¯¢å’Œè¾“å‡º
    FileTable --> FileContent
    LinkTable --> LinkGraph
    TagTable --> LinkGraph
    FileTagTable --> LinkGraph
    EmbedTable --> SearchResult
    VectorDB --> SearchResult
    VectorDB --> AIAnswer
    FileTable --> SearchResult
```

### AIé—®ç­”ç³»ç»Ÿ(RAG)æµç¨‹å›¾
```mermaid
sequenceDiagram
    participant User as ç”¨æˆ·
    participant UI as å‰ç«¯ç•Œé¢
    participant API as FastAPIåç«¯
    participant Embed as åµŒå…¥æœåŠ¡
    participant ChromaDB as ChromaDB
    participant LocalLLM as æœ¬åœ°LLMæœåŠ¡
    participant DB as SQLiteDB

    User->>UI: è¾“å…¥é—®é¢˜
    UI->>API: POST /api/v1/chat/ask
    
    Note over API: RAGæ£€ç´¢é˜¶æ®µ
    API->>Embed: å°†é—®é¢˜è½¬æ¢ä¸ºå‘é‡
    Embed-->>API: è¿”å›é—®é¢˜å‘é‡
    
    API->>ChromaDB: è¯­ä¹‰æœç´¢ç›¸å…³æ–‡æ¡£
    ChromaDB-->>API: è¿”å›ç›¸å…³æ–‡æ¡£å—
    
    API->>DB: æŸ¥è¯¢æ–‡æ¡£å…ƒä¿¡æ¯
    DB-->>API: è¿”å›æ–‡æ¡£æ ‡é¢˜ã€è·¯å¾„ç­‰
    
    Note over API: ä¸Šä¸‹æ–‡æ„å»ºé˜¶æ®µ
    API->>API: æ„å»ºæç¤ºè¯\né—®é¢˜ + ç›¸å…³æ–‡æ¡£ä¸Šä¸‹æ–‡
    
    Note over API: ç­”æ¡ˆç”Ÿæˆé˜¶æ®µ
    API->>LocalLLM: å‘é€æ„å»ºå¥½çš„æç¤ºè¯
    LocalLLM-->>API: è¿”å›AIç”Ÿæˆçš„ç­”æ¡ˆ
    
    Note over API: ç»“æœæ•´ç†é˜¶æ®µ
    API->>DB: ä¿å­˜å¯¹è¯è®°å½•
    API->>API: æ•´ç†ç­”æ¡ˆå’Œå¼•ç”¨æ¥æº
    
    API-->>UI: è¿”å›ç­”æ¡ˆå’Œæ¥æºæ–‡æ¡£
    UI-->>User: æ˜¾ç¤ºç­”æ¡ˆå’Œå¼•ç”¨é“¾æ¥
    
    Note over User,DB: æ•´ä¸ªè¿‡ç¨‹çº¦2-5ç§’
```

### å¼€å‘é˜¶æ®µæµç¨‹å›¾
```mermaid
gantt
    title AIç¬”è®°æœ¬é¡¹ç›®å¼€å‘æ—¶é—´çº¿
    dateFormat  X
    axisFormat %s

    section é˜¶æ®µä¸€ï¼šåŸºç¡€æ¶æ„
    é¡¹ç›®ç»“æ„è®¾è®¡        :done, arch1, 0, 1w
    å¼€å‘ç¯å¢ƒé…ç½®        :done, arch2, after arch1, 1w
    å®¹å™¨åŒ–åŸºç¡€è®¾æ–½      :active, arch3, after arch2, 1w
    åŸºç¡€APIè®¾è®¡         :arch4, after arch3, 1w

    section é˜¶æ®µäºŒï¼šæ ¸å¿ƒåŠŸèƒ½
    Markdownç¼–è¾‘å™¨      :editor, after arch4, 2w
    æ–‡ä»¶ç®¡ç†ç³»ç»Ÿ        :files, after arch4, 2w
    åŒå‘é“¾æ¥åŠŸèƒ½        :links, after editor, 1w
    åŸºç¡€æœç´¢åŠŸèƒ½        :search, after files, 1w

    section é˜¶æ®µä¸‰ï¼šAIåŠŸèƒ½
    æœ¬åœ°LLMé›†æˆ         :llm, after links, 2w
    åµŒå…¥æ¨¡å‹é›†æˆ        :embed, after search, 2w
    RAGé—®ç­”ç³»ç»Ÿ         :rag, after llm, 2w
    å‘é‡æœç´¢ä¼˜åŒ–        :vector, after embed, 1w

    section é˜¶æ®µå››ï¼šé«˜çº§åŠŸèƒ½
    é“¾æ¥å…³ç³»å¯è§†åŒ–      :graph, after rag, 2w
    æ™ºèƒ½æ¨èç³»ç»Ÿ        :advsearch, after vector, 2w
    æ•°æ®å¯¼å…¥å¯¼å‡º        :import, after graph, 1w
    æ’ä»¶ç³»ç»Ÿè®¾è®¡        :plugin, after advsearch, 1w

    section é˜¶æ®µäº”ï¼šä¼˜åŒ–éƒ¨ç½²
    æ€§èƒ½ä¼˜åŒ–            :perf, after import, 1w
    ç”¨æˆ·ä½“éªŒä¼˜åŒ–        :ux, after plugin, 1w
    æµ‹è¯•å®Œå–„            :test, after perf, 1w
    æ–‡æ¡£ç¼–å†™            :docs, after ux, 1w
```

## å¦‚ä½•ä½¿ç”¨æµç¨‹å›¾æŒ‡å¯¼å¼€å‘

### ğŸ“‹ æ¶æ„ç†è§£
- **æ•´ä½“æ¶æ„æµç¨‹å›¾**ï¼šäº†è§£ç³»ç»Ÿå„å±‚æ¬¡çš„å…³ç³»å’Œæ•°æ®æµå‘
- **æ ¸å¿ƒä¸šåŠ¡æµç¨‹å›¾**ï¼šç†è§£å››å¤§æ ¸å¿ƒåŠŸèƒ½çš„å¤„ç†æµç¨‹
- **æ•°æ®æµè½¬å›¾**ï¼šæŒæ¡æ•°æ®ä»è¾“å…¥åˆ°è¾“å‡ºçš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸ

### ğŸ”„ å¼€å‘æŒ‡å¯¼
- **AIé—®ç­”ç³»ç»Ÿæµç¨‹å›¾**ï¼šå®ç°RAGé—®ç­”åŠŸèƒ½çš„è¯¦ç»†æ­¥éª¤
- **å¼€å‘é˜¶æ®µæµç¨‹å›¾**ï¼šæŒ‰æ—¶é—´çº¿æ¨è¿›å„é˜¶æ®µå¼€å‘ä»»åŠ¡

### ğŸ’¡ å¼€å‘å»ºè®®
1. **å…ˆçœ‹æ¶æ„å›¾**ï¼šç†è§£æ•´ä½“è®¾è®¡åå†å¼€å§‹ç¼–ç 
2. **æŒ‰æµç¨‹å®ç°**ï¼šä¸¥æ ¼æŒ‰ç…§ä¸šåŠ¡æµç¨‹å›¾å®ç°å„åŠŸèƒ½æ¨¡å—
3. **æ•°æ®ä¼˜å…ˆ**ï¼šæ ¹æ®æ•°æ®æµè½¬å›¾è®¾è®¡æ•°æ®æ¨¡å‹å’ŒAPI
4. **é˜¶æ®µæ¨è¿›**ï¼šæŒ‰å¼€å‘é˜¶æ®µæµç¨‹å›¾çš„æ—¶é—´çº¿æ‰§è¡Œ
5. **æµ‹è¯•éªŒè¯**ï¼šæ¯ä¸ªæµç¨‹èŠ‚ç‚¹éƒ½è¦æœ‰å¯¹åº”çš„æµ‹è¯•ç”¨ä¾‹

## é¡¹ç›®ç»“æ„

```
ai-notebook/
â”œâ”€â”€ frontend/                 # å‰ç«¯Reactåº”ç”¨
â”œâ”€â”€ backend/                  # åç«¯FastAPIåº”ç”¨
â”œâ”€â”€ docker/                   # Dockeré…ç½®æ–‡ä»¶
â”œâ”€â”€ docs/                     # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ tests/                    # æµ‹è¯•æ–‡ä»¶
â”œâ”€â”€ scripts/                  # æ„å»ºå’Œéƒ¨ç½²è„šæœ¬
â”œâ”€â”€ docker-compose.yml        # æœåŠ¡ç¼–æ’
â”œâ”€â”€ README.md                 # é¡¹ç›®è¯´æ˜
â”œâ”€â”€ DATABASE.md               # æ•°æ®åº“ç»“æ„æ–‡æ¡£
â””â”€â”€ requirements.txt          # ä¾èµ–ç®¡ç†
```

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Docker å’Œ Docker Compose
- è‡³å°‘ 16GB å†…å­˜
- è‡³å°‘ 100GB å­˜å‚¨ç©ºé—´

### å®‰è£…è¿è¡Œ

```bash
# å…‹éš†é¡¹ç›®
git clone <repository-url>
cd ai-notebook

# å¯åŠ¨æœåŠ¡
docker-compose up -d

# è®¿é—®åº”ç”¨
# å‰ç«¯ï¼šhttp://localhost:3000
# APIæ–‡æ¡£ï¼šhttp://localhost:8000/docs
```

## å¼€å‘æŒ‡å—

### å¼€å‘ç¯å¢ƒè®¾ç½®

```bash
# å‰ç«¯å¼€å‘
cd frontend
npm install
npm run dev

# åç«¯å¼€å‘
cd backend
pip install -r requirements.txt
uvicorn main:app --reload
```

### ä»£ç è§„èŒƒ

- å‰ç«¯ï¼šESLint + Prettier
- åç«¯ï¼šBlack + isort
- æäº¤ï¼šConventional Commits

## æ–°å¢æ–‡ä»¶è¯´æ˜

### åå°ä»»åŠ¡ç³»ç»Ÿ
- **backend/app/models/pending_task.py**ï¼šå¾…å¤„ç†ä»»åŠ¡æ•°æ®æ¨¡å‹
- **backend/app/services/task_processor_service.py**ï¼šåå°ä»»åŠ¡å¤„ç†æœåŠ¡

### ä½¿ç”¨è¯´æ˜

#### è‡ªåŠ¨ä»»åŠ¡å¤„ç†
ç³»ç»Ÿé‡‡ç”¨æ™ºèƒ½çš„è‡ªåŠ¨ä»»åŠ¡å¤„ç†æœºåˆ¶ï¼š
1. **æ–‡ä»¶å˜åŠ¨è§¦å‘**ï¼šå½“æ–‡ä»¶åˆ›å»ºã€ä¿®æ”¹æˆ–åˆ é™¤æ—¶ï¼Œç³»ç»Ÿè‡ªåŠ¨åˆ›å»ºåå°ä»»åŠ¡
2. **å³æ—¶å¤„ç†**ï¼šä»»åŠ¡åˆ›å»ºåç«‹å³åœ¨åå°çº¿ç¨‹ä¸­å¼‚æ­¥å¤„ç†
3. **å¿«é€Ÿå“åº”**ï¼šæ–‡ä»¶ä¿å­˜æ“ä½œç«‹å³è¿”å›ï¼Œä¸ç­‰å¾…ç´¢å¼•æ„å»ºå®Œæˆ
4. **æ™ºèƒ½ç®¡ç†**ï¼šè‡ªåŠ¨æ£€æµ‹å¹¶å¯åŠ¨åå°ä»»åŠ¡å¤„ç†å™¨ï¼Œæ— éœ€æ‰‹åŠ¨å¹²é¢„
5. **çŠ¶æ€ç›‘æ§**ï¼šå¯é€šè¿‡æ—¥å¿—æŸ¥çœ‹å¤„ç†è¿›åº¦å’ŒçŠ¶æ€

## å‡½æ•°åˆ—è¡¨

### åç«¯APIæ¥å£å±‚

#### æ–‡ä»¶ç®¡ç†API (backend/app/api/files.py)

| å‡½æ•°å | ä¼ å…¥å‚æ•° | ä¼ å‡ºå‚æ•° | åŠŸèƒ½è¯´æ˜ |
|--------|----------|----------|----------|
| `create_file_api()` | `file: FileCreate, fast_mode: bool=False` | `FileResponse` | åˆ›å»ºæ–°æ–‡ä»¶ï¼ˆæ”¯æŒå¿«é€Ÿæ¨¡å¼ï¼Œå¿«é€Ÿæ¨¡å¼æ—¶åå°å¼‚æ­¥å¤„ç†ç´¢å¼•ï¼‰ |
| `read_files_api()` | `skip: int=0, limit: int=100, include_deleted: bool=False` | `List[FileResponse]` | åˆ†é¡µè·å–æ–‡ä»¶åˆ—è¡¨ |
| `read_file_by_path_api()` | `file_path: str` | `FileResponse` | æ ¹æ®æ–‡ä»¶è·¯å¾„è¯»å–æ–‡ä»¶ï¼ˆæ”¯æŒä»ç£ç›˜è‡ªåŠ¨å¯¼å…¥ï¼‰ |
| `get_file_tree_api()` | `root_path: str="notes"` | `List[Dict]` | è·å–ç›®å½•æ ‘ç»“æ„ |
| `create_directory_api()` | `request: dict{"path": str}` | `Dict{"success": bool, "message": str}` | åˆ›å»ºæ–°ç›®å½• |
| `search_files_api()` | `q: str, search_type: str="mixed", limit: int=50, similarity_threshold: float=0.7` | `SearchResponse` | ç»Ÿä¸€æœç´¢æ¥å£ï¼Œæ”¯æŒå…³é”®è¯ã€è¯­ä¹‰å’Œæ··åˆæœç´¢ |
| `get_search_history_api()` | `limit: int=20` | `Dict{"history": List[SearchHistory]}` | è·å–ç”¨æˆ·æœç´¢å†å²è®°å½• |
| `get_popular_queries_api()` | `limit: int=10` | `Dict{"popular_queries": List[PopularQuery]}` | è·å–æœ€å¸¸ç”¨çš„æœç´¢æŸ¥è¯¢ç»Ÿè®¡ |
| `move_file_api()` | `request: dict{"source_path": str, "destination_path": str}` | `Dict{"success": bool, "message": str}` | ç§»åŠ¨æ–‡ä»¶æˆ–ç›®å½• |
| `read_file_api()` | `file_id: int` | `FileResponse` | æ ¹æ®æ–‡ä»¶IDè¯»å–æ–‡ä»¶ä¿¡æ¯ |
| `update_file_api()` | `file_id: int, file: FileUpdate, fast_mode: bool=False` | `FileResponse` | æ›´æ–°æ–‡ä»¶å†…å®¹ï¼ˆæ”¯æŒå¿«é€Ÿæ¨¡å¼ï¼Œå¿«é€Ÿæ¨¡å¼æ—¶åå°å¼‚æ­¥å¤„ç†ç´¢å¼•ï¼‰ |
| `update_file_by_path_api()` | `file_path: str, file: FileUpdate, fast_mode: bool=False` | `FileResponse` | æ ¹æ®è·¯å¾„æ›´æ–°æ–‡ä»¶å†…å®¹ï¼ˆæ”¯æŒå¿«é€Ÿæ¨¡å¼ï¼‰ |
| `delete_file_api()` | `file_id: int` | `None` | è½¯åˆ é™¤æ–‡ä»¶ |

#### AIåŠŸèƒ½API (backend/app/api/ai.py)

| å‡½æ•°å | ä¼ å…¥å‚æ•° | ä¼ å‡ºå‚æ•° | åŠŸèƒ½è¯´æ˜ |
|--------|----------|----------|----------|
| `generate_summary_api()` | `request: SummaryRequest{content: str, max_length: int=200}` | `Dict{"summary": str}` | ä½¿ç”¨AIç”Ÿæˆæ–‡æ¡£æ‘˜è¦ |
| `suggest_tags_api()` | `request: TagSuggestionRequest{title: str, content: str, max_tags: int=5}` | `Dict{"tags": List[str]}` | åŸºäºå†…å®¹æ™ºèƒ½æ¨èæ ‡ç­¾ï¼ˆä»é¢„è®¾æ ‡ç­¾å’Œæ•°æ®åº“ç°æœ‰æ ‡ç­¾ä¸­é€‰æ‹©ï¼‰ |
| `create_embeddings_api()` | `file_id: int` | `Dict{"success": bool, "message": str}` | ä¸ºæŒ‡å®šæ–‡ä»¶åˆ›å»ºå‘é‡åµŒå…¥ |
| `semantic_search_api()` | `request: SemanticSearchRequest{query: str, limit: int=10, similarity_threshold: float=0.7}` | `Dict{"results": List}` | åŸºäºå‘é‡ç›¸ä¼¼åº¦è¿›è¡Œè¯­ä¹‰æœç´¢ |
| `chat_api()` | `request: ChatRequest{question: str, max_context_length: int=3000, search_limit: int=5}` | `Dict{"answer": str, "related_documents": List, "search_query": str, "processing_time": float}` | AIæ™ºèƒ½é—®ç­”ï¼ŒåŸºäºRAGæŠ€æœ¯å›ç­”ç”¨æˆ·é—®é¢˜ |
| `analyze_content_api()` | `request: ContentAnalysisRequest{content: str}` | `Dict{"analysis": Any}` | åˆ†ææ–‡æ¡£å†…å®¹ç‰¹å¾ |
| `generate_related_questions_api()` | `request: RelatedQuestionsRequest{content: str, num_questions: int=3}` | `Dict{"questions": List[str]}` | åŸºäºå†…å®¹ç”Ÿæˆç›¸å…³æ€è€ƒé—®é¢˜ |
| `discover_smart_links_api()` | `file_id: int` | `Dict{"suggestions": List[SmartLinkSuggestion]}` | æ™ºèƒ½å‘ç°æ–‡ç« é—´çš„é“¾æ¥å…³ç³» |
| `get_ai_status_api()` | æ—  | `Dict{"available": bool, "openai_configured": bool, "base_url": str}` | æ£€æŸ¥AIæœåŠ¡å¯ç”¨æ€§å’Œé…ç½®çŠ¶æ€ |

#### ç´¢å¼•ç®¡ç†API (backend/app/api/index.py)

| å‡½æ•°å | ä¼ å…¥å‚æ•° | ä¼ å‡ºå‚æ•° | åŠŸèƒ½è¯´æ˜ |
|--------|----------|----------|----------|
| `get_index_status()` | æ—  | `Dict{"success": bool, "data": Dict}` | è·å–ç´¢å¼•çŠ¶æ€ä¿¡æ¯ |
| `rebuild_index()` | `background_tasks: BackgroundTasks` | `Dict{"success": bool, "message": str}` | é‡å»ºç´¢å¼•ï¼ˆåå°ä»»åŠ¡ï¼‰ |
| `get_rebuild_progress()` | æ—  | `Dict{"success": bool, "data": Dict}` | è·å–ç´¢å¼•é‡å»ºè¿›åº¦ |
| `scan_notes_directory()` | æ—  | `Dict{"success": bool, "data": Dict}` | æ‰«ænotesç›®å½• |

#### æ ‡ç­¾ç®¡ç†API (backend/app/api/tags.py)

| å‡½æ•°å | ä¼ å…¥å‚æ•° | ä¼ å‡ºå‚æ•° | åŠŸèƒ½è¯´æ˜ |
|--------|----------|----------|----------|
| `create_tag_api()` | `tag: TagCreate` | `TagResponse` | åˆ›å»ºæ–°æ ‡ç­¾ |
| `read_tag_api()` | `tag_id: int` | `TagResponse` | æ ¹æ®IDè·å–æ ‡ç­¾ |
| `read_all_tags_api()` | `skip: int=0, limit: int=100` | `List[TagResponse]` | è·å–æ‰€æœ‰æ ‡ç­¾åˆ—è¡¨ |
| `update_tag_api()` | `tag_id: int, tag: TagUpdate` | `TagResponse` | æ›´æ–°æ ‡ç­¾ä¿¡æ¯ |
| `delete_tag_api()` | `tag_id: int` | `None` | åˆ é™¤æ ‡ç­¾ |
| `create_file_tag_api()` | `file_tag: FileTagCreate` | `FileTagResponse` | åˆ›å»ºæ–‡ä»¶æ ‡ç­¾å…³è” |
| `get_file_tags_api()` | `file_id: int` | `List[FileTagResponse]` | è·å–æ–‡ä»¶çš„æ‰€æœ‰æ ‡ç­¾ |
| `delete_file_tag_api()` | `file_id: int, tag_id: int` | `None` | åˆ é™¤æ–‡ä»¶æ ‡ç­¾å…³è” |

#### é“¾æ¥ç®¡ç†API (backend/app/api/links.py)

| å‡½æ•°å | ä¼ å…¥å‚æ•° | ä¼ å‡ºå‚æ•° | åŠŸèƒ½è¯´æ˜ |
|--------|----------|----------|----------|
| `create_link_api()` | `link: LinkCreate` | `LinkResponse` | åˆ›å»ºæ–°é“¾æ¥ |
| `read_link_api()` | `link_id: int` | `LinkResponse` | æ ¹æ®IDè·å–é“¾æ¥ |
| `read_links_by_file_api()` | `file_id: int` | `List[LinkResponse]` | è·å–æ–‡ä»¶çš„æ‰€æœ‰é“¾æ¥ |
| `read_all_links_api()` | `skip: int=0, limit: int=100` | `List[LinkResponse]` | è·å–æ‰€æœ‰é“¾æ¥åˆ—è¡¨ |
| `update_link_api()` | `link_id: int, link: LinkUpdate` | `LinkResponse` | æ›´æ–°é“¾æ¥ä¿¡æ¯ |
| `delete_link_api()` | `link_id: int` | `None` | åˆ é™¤é“¾æ¥ |

### åç«¯æœåŠ¡å±‚

#### æ–‡ä»¶æœåŠ¡ (backend/app/services/file_service.py)

| å‡½æ•°å | ä¼ å…¥å‚æ•° | ä¼ å‡ºå‚æ•° | åŠŸèƒ½è¯´æ˜ |
|--------|----------|----------|----------|
| `create_file()` | `file: FileCreate, fast_mode: bool=False` | `File` | åˆ›å»ºæ–‡ä»¶ï¼ˆæ”¯æŒå¿«é€Ÿæ¨¡å¼ï¼Œå¿«é€Ÿæ¨¡å¼æ—¶åå°å¼‚æ­¥å¤„ç†ç´¢å¼•ï¼‰ |
| `get_file()` | `file_id: int` | `Optional[File]` | æ ¹æ®IDè·å–æ–‡ä»¶ |
| `get_file_by_path()` | `file_path: str` | `Optional[File]` | æ ¹æ®è·¯å¾„è·å–æ–‡ä»¶ï¼Œæ”¯æŒä»ç£ç›˜è‡ªåŠ¨å¯¼å…¥ |
| `get_files()` | `skip: int=0, limit: int=100, include_deleted: bool=False` | `List[File]` | åˆ†é¡µè·å–æ–‡ä»¶åˆ—è¡¨ |
| `update_file()` | `file_id: int, file_update: FileUpdate, fast_mode: bool=False` | `Optional[File]` | æ›´æ–°æ–‡ä»¶ï¼ˆæ”¯æŒå¿«é€Ÿæ¨¡å¼ï¼Œå¿«é€Ÿæ¨¡å¼æ—¶åå°å¼‚æ­¥å¤„ç†ç´¢å¼•ï¼‰ |
| `delete_file()` | `file_id: int` | `Optional[File]` | è½¯åˆ é™¤æ–‡ä»¶ |
| `hard_delete_file()` | `file_id: int` | `Optional[File]` | ç¡¬åˆ é™¤æ–‡ä»¶ |
| `search_files()` | `query_str: str, skip: int=0, limit: int=100` | `List[File]` | LIKEæ¨¡ç³Šæœç´¢ï¼Œç”¨äºå…³é”®è¯æœç´¢ |
| `_add_vector_index_task()` | `file: File` | `None` | æ·»åŠ å‘é‡ç´¢å¼•ä»»åŠ¡åˆ°é˜Ÿåˆ—ï¼Œå¹¶è‡ªåŠ¨æ£€æŸ¥å¯åŠ¨ç´¢å¼•è¿›ç¨‹ |
| `_ensure_task_processor_running()` | `task_processor: TaskProcessorService` | `None` | ç¡®ä¿ä»»åŠ¡å¤„ç†å™¨æ­£åœ¨è¿è¡Œï¼Œå¦‚æœæ²¡æœ‰è¿è¡Œåˆ™å¯åŠ¨åå°çº¿ç¨‹å¤„ç† |

**æ–°å¢åŠŸèƒ½ç‰¹æ€§**ï¼š
- **æ™ºèƒ½ç´¢å¼•å¯åŠ¨**ï¼šæ–‡ä»¶åˆ›å»ºæˆ–ä¿®æ”¹æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æ£€æŸ¥ç´¢å¼•è¿›ç¨‹çŠ¶æ€
- **æŒ‰éœ€å¯åŠ¨**ï¼šå¦‚æœæ²¡æœ‰ç´¢å¼•è¿›ç¨‹åœ¨è¿è¡Œï¼Œä¼šè‡ªåŠ¨å¯åŠ¨åå°çº¿ç¨‹å¤„ç†ä»»åŠ¡é˜Ÿåˆ—
- **é¿å…é‡å¤æ‰§è¡Œ**ï¼šä½¿ç”¨æ–‡ä»¶é”æœºåˆ¶é˜²æ­¢å¤šä¸ªç´¢å¼•è¿›ç¨‹åŒæ—¶è¿è¡Œ
- **éé˜»å¡å¤„ç†**ï¼šç´¢å¼•å¤„ç†åœ¨ç‹¬ç«‹çš„åå°çº¿ç¨‹ä¸­è¿›è¡Œï¼Œä¸å½±å“æ–‡ä»¶ä¿å­˜æ“ä½œ

#### AIæœåŠ¡ (backend/app/services/ai_service.py)

| å‡½æ•°å | ä¼ å…¥å‚æ•° | ä¼ å‡ºå‚æ•° | åŠŸèƒ½è¯´æ˜ |
|--------|----------|----------|----------|
| `is_available()` | æ—  | `bool` | æ£€æŸ¥AIæœåŠ¡æ˜¯å¦å¯ç”¨ |
| `generate_summary()` | `content: str, max_length: int=200` | `Optional[str]` | ç”Ÿæˆæ–‡æ¡£æ‘˜è¦ |
| `suggest_tags()` | `title: str, content: str, max_tags: int=5` | `List[str]` | æ™ºèƒ½æ ‡ç­¾å»ºè®®ï¼ˆä»é¢„è®¾æ ‡ç­¾å’Œæ•°æ®åº“ç°æœ‰æ ‡ç­¾ä¸­é€‰æ‹©ï¼Œé¿å…è¿‡åº¦è‡ªç”±å‘æŒ¥ï¼‰ |
| `create_embeddings()` | `file: File` | `bool` | ä¸ºæ–‡ä»¶åˆ›å»ºå‘é‡åµŒå…¥ |
| `semantic_search()` | `query: str, limit: int=10, similarity_threshold: float=0.7` | `List[Dict[str, Any]]` | è¯­ä¹‰æœç´¢ |
| `chat_with_context()` | `question: str, max_context_length: int=3000, search_limit: int=5` | `Dict[str, Any]` | åŸºäºRAGçš„æ™ºèƒ½é—®ç­”ï¼Œå…ˆæœç´¢ç›¸å…³æ–‡æ¡£å†ç”Ÿæˆå›ç­” |
| `clear_vector_database()` | æ—  | `bool` | æ¸…ç©ºå‘é‡æ•°æ®åº“ |
| `add_document_to_vector_db()` | `file_id: int, title: str, content: str, metadata: Dict=None` | `bool` | æ·»åŠ æ–‡æ¡£åˆ°å‘é‡æ•°æ®åº“ |
| `analyze_content()` | `content: str` | `Dict[str, Any]` | å†…å®¹åˆ†æ |
| `generate_related_questions()` | `content: str, num_questions: int=3` | `List[str]` | ç”Ÿæˆç›¸å…³é—®é¢˜ |
| `discover_smart_links()` | `file_id: int, content: str, title: str` | `List[Dict[str, Any]]` | æ™ºèƒ½å‘ç°æ–‡ç« é—´çš„é“¾æ¥å…³ç³»ï¼ŒåŸºäºè¯­ä¹‰æœç´¢å’ŒAIåˆ†æ |

#### æœç´¢æœåŠ¡ (backend/app/services/search_service.py)

| å‡½æ•°å | ä¼ å…¥å‚æ•° | ä¼ å‡ºå‚æ•° | åŠŸèƒ½è¯´æ˜ |
|--------|----------|----------|----------|
| `search()` | `query: str, search_type: str="mixed", limit: int=50, similarity_threshold: float=0.7` | `Dict[str, Any]` | ç»Ÿä¸€æœç´¢å…¥å£ï¼Œæ”¯æŒå…³é”®è¯ã€è¯­ä¹‰ã€æ··åˆæœç´¢ |
| `get_search_history()` | `limit: int=20` | `List[Dict[str, Any]]` | è·å–ç”¨æˆ·æœç´¢å†å²è®°å½• |
| `get_popular_queries()` | `limit: int=10` | `List[Dict[str, Any]]` | ç»Ÿè®¡æœ€å¸¸ç”¨çš„æœç´¢æŸ¥è¯¢ |

#### æ ‡ç­¾æœåŠ¡ (backend/app/services/tag_service.py)

| å‡½æ•°å | ä¼ å…¥å‚æ•° | ä¼ å‡ºå‚æ•° | åŠŸèƒ½è¯´æ˜ |
|--------|----------|----------|----------|
| `create_tag()` | `tag: TagCreate` | `Tag` | åˆ›å»ºæ ‡ç­¾ |
| `get_tag()` | `tag_id: int` | `Optional[Tag]` | æ ¹æ®IDè·å–æ ‡ç­¾ |
| `get_tag_by_name()` | `name: str` | `Optional[Tag]` | æ ¹æ®åç§°è·å–æ ‡ç­¾ |
| `get_all_tags()` | `skip: int=0, limit: int=100` | `List[Tag]` | è·å–æ‰€æœ‰æ ‡ç­¾ |
| `update_tag()` | `tag_id: int, tag_update: TagUpdate` | `Optional[Tag]` | æ›´æ–°æ ‡ç­¾ |
| `delete_tag()` | `tag_id: int` | `Optional[Tag]` | åˆ é™¤æ ‡ç­¾ |
| `search_tags()` | `query: str` | `List[Tag]` | æœç´¢æ ‡ç­¾ |

#### æ–‡ä»¶æ ‡ç­¾æœåŠ¡ (backend/app/services/tag_service.py)

| å‡½æ•°å | ä¼ å…¥å‚æ•° | ä¼ å‡ºå‚æ•° | åŠŸèƒ½è¯´æ˜ |
|--------|----------|----------|----------|
| `create_file_tag()` | `file_tag: FileTagCreate` | `FileTag` | åˆ›å»ºæ–‡ä»¶æ ‡ç­¾å…³è” |
| `get_file_tag()` | `file_id: int, tag_id: int` | `Optional[FileTag]` | è·å–æ–‡ä»¶æ ‡ç­¾å…³è” |
| `get_file_tags_by_file()` | `file_id: int` | `List[FileTag]` | è·å–æ–‡ä»¶çš„æ‰€æœ‰æ ‡ç­¾ |
| `get_file_tags_by_tag()` | `tag_id: int` | `List[FileTag]` | è·å–æ ‡ç­¾å…³è”çš„æ‰€æœ‰æ–‡ä»¶ |
| `delete_file_tag()` | `file_id: int, tag_id: int` | `Optional[FileTag]` | åˆ é™¤æ–‡ä»¶æ ‡ç­¾å…³è” |
| `delete_all_file_tags()` | `file_id: int` | `int` | åˆ é™¤æ–‡ä»¶çš„æ‰€æœ‰æ ‡ç­¾å…³è” |

#### é“¾æ¥æœåŠ¡ (backend/app/services/link_service.py)

| å‡½æ•°å | ä¼ å…¥å‚æ•° | ä¼ å‡ºå‚æ•° | åŠŸèƒ½è¯´æ˜ |
|--------|----------|----------|----------|
| `create_link()` | `link: LinkCreate` | `Link` | åˆ›å»ºé“¾æ¥ |
| `get_link()` | `link_id: int` | `Optional[Link]` | æ ¹æ®IDè·å–é“¾æ¥ |
| `get_links_by_source_file()` | `source_file_id: int` | `List[Link]` | è·å–æºæ–‡ä»¶çš„æ‰€æœ‰é“¾æ¥ |
| `get_links_by_target_file()` | `target_file_id: int` | `List[Link]` | è·å–ç›®æ ‡æ–‡ä»¶çš„æ‰€æœ‰é“¾æ¥ |
| `get_all_links()` | `skip: int=0, limit: int=100` | `List[Link]` | è·å–æ‰€æœ‰é“¾æ¥ |
| `update_link()` | `link_id: int, link_update: LinkUpdate` | `Optional[Link]` | æ›´æ–°é“¾æ¥ |
| `delete_link()` | `link_id: int` | `Optional[Link]` | åˆ é™¤é“¾æ¥ |

#### ç´¢å¼•æœåŠ¡ (backend/app/services/index_service.py)

| å‡½æ•°å | ä¼ å…¥å‚æ•° | ä¼ å‡ºå‚æ•° | åŠŸèƒ½è¯´æ˜ |
|--------|----------|----------|----------|
| `get_index_status()` | æ—  | `Dict[str, Any]` | è·å–ç´¢å¼•çŠ¶æ€ |
| `scan_notes_directory()` | æ—  | `List[Dict[str, Any]]` | æ‰«ænotesç›®å½•ï¼Œè¿”å›æ–‡ä»¶ä¿¡æ¯åˆ—è¡¨ |
| `rebuild_sqlite_index()` | `progress_callback=None` | `Dict[str, Any]` | é‡å»ºSQLiteç´¢å¼• |
| `rebuild_vector_index()` | `progress_callback=None` | `Dict[str, Any]` | é‡å»ºå‘é‡ç´¢å¼• |
| `rebuild_all_indexes()` | `progress_callback=None` | `Dict[str, Any]` | é‡å»ºæ‰€æœ‰ç´¢å¼• |
| `search_with_chinese_support()` | `query: str, limit: int=50` | `List[File]` | æ”¯æŒä¸­æ–‡çš„æœç´¢ |
| `auto_initialize_on_startup()` | æ—  | `bool` | å¯åŠ¨æ—¶è‡ªåŠ¨åˆå§‹åŒ– |

#### åå°ä»»åŠ¡å¤„ç†æœåŠ¡ (backend/app/services/task_processor_service.py)

| å‡½æ•°å | ä¼ å…¥å‚æ•° | ä¼ å‡ºå‚æ•° | åŠŸèƒ½è¯´æ˜ |
|--------|----------|----------|----------|
| `TaskProcessorService.__init__()` | æ—  | `TaskProcessorService` | åˆå§‹åŒ–ä»»åŠ¡å¤„ç†å™¨æœåŠ¡ |
| `create_pending_task()` | `file_id: int, task_type: str, priority: int=1` | `PendingTask` | åˆ›å»ºå¾…å¤„ç†ä»»åŠ¡ |
| `get_pending_tasks()` | `task_type: Optional[str]=None, limit: int=100` | `List[PendingTask]` | è·å–å¾…å¤„ç†ä»»åŠ¡åˆ—è¡¨ |
| `process_pending_tasks()` | `max_tasks: int=10, timeout_minutes: int=10` | `Dict[str, Any]` | å¤„ç†å¾…å¤„ç†ä»»åŠ¡é˜Ÿåˆ— |
| `process_single_task()` | `task: PendingTask` | `bool` | å¤„ç†å•ä¸ªä»»åŠ¡ |
| `mark_task_completed()` | `task_id: int` | `bool` | æ ‡è®°ä»»åŠ¡ä¸ºå·²å®Œæˆ |
| `mark_task_failed()` | `task_id: int, error_message: str` | `bool` | æ ‡è®°ä»»åŠ¡ä¸ºå¤±è´¥ |
| `cleanup_old_tasks()` | `days: int=7` | `int` | æ¸…ç†æ—§ä»»åŠ¡è®°å½• |
| `get_task_statistics()` | æ—  | `Dict[str, Any]` | è·å–ä»»åŠ¡ç»Ÿè®¡ä¿¡æ¯ |

### å‰ç«¯APIå®¢æˆ·ç«¯ (frontend/src/services/api.ts)

| å‡½æ•°å | ä¼ å…¥å‚æ•° | ä¼ å‡ºå‚æ•° | åŠŸèƒ½è¯´æ˜ |
|--------|----------|----------|----------|
| `getFiles()` | `skip: number=0, limit: number=100` | `Promise<FileData[]>` | è·å–æ–‡ä»¶åˆ—è¡¨ |
| `getFile()` | `fileId: number` | `Promise<FileData>` | æ ¹æ®IDè·å–æ–‡ä»¶ |
| `getFileByPath()` | `filePath: string` | `Promise<FileData>` | æ ¹æ®è·¯å¾„è·å–æ–‡ä»¶ |
| `createFile()` | `fileData: Omit<FileData, 'id'>` | `Promise<FileData>` | åˆ›å»ºæ–°æ–‡ä»¶ |
| `updateFile()` | `fileId: number, fileData: Partial<FileData>` | `Promise<FileData>` | æ›´æ–°æ–‡ä»¶ |
| `updateFileByPath()` | `filePath: string, fileData: Partial<FileData>` | `Promise<FileData>` | æ ¹æ®è·¯å¾„æ›´æ–°æ–‡ä»¶ |
| `deleteFile()` | `fileId: number` | `Promise<void>` | åˆ é™¤æ–‡ä»¶ |
| `getFileTree()` | `rootPath: string="notes"` | `Promise<FileTreeNode[]>` | è·å–æ–‡ä»¶æ ‘ |
| `createDirectory()` | `dirPath: string` | `Promise<{success: boolean, message: string}>` | åˆ›å»ºç›®å½• |
| `moveFile()` | `sourcePath: string, destinationPath: string` | `Promise<{success: boolean, message: string}>` | ç§»åŠ¨æ–‡ä»¶æˆ–ç›®å½• |
| `search()` | `query: string, searchType: string="mixed", limit: number=50, similarityThreshold: number=0.7` | `Promise<SearchResponse>` | ç»Ÿä¸€æœç´¢æ¥å£ï¼Œæ”¯æŒå…³é”®è¯ã€è¯­ä¹‰å’Œæ··åˆæœç´¢ |
| `getSearchHistory()` | `limit: number=20` | `Promise<SearchHistory[]>` | è·å–æœç´¢å†å² |
| `getPopularQueries()` | `limit: number=10` | `Promise<PopularQuery[]>` | è·å–çƒ­é—¨æŸ¥è¯¢ |
| `getTags()` | `skip: number=0, limit: number=100` | `Promise<TagData[]>` | è·å–æ ‡ç­¾åˆ—è¡¨ |
| `getTag()` | `tagId: number` | `Promise<TagData>` | æ ¹æ®IDè·å–æ ‡ç­¾ |
| `createTag()` | `tagData: Omit<TagData, 'id'>` | `Promise<TagData>` | åˆ›å»ºæ ‡ç­¾ |
| `updateTag()` | `tagId: number, tagData: Partial<TagData>` | `Promise<TagData>` | æ›´æ–°æ ‡ç­¾ |
| `deleteTag()` | `tagId: number` | `Promise<void>` | åˆ é™¤æ ‡ç­¾ |
| `createFileTag()` | `fileId: number, tagId: number` | `Promise<FileTagData>` | åˆ›å»ºæ–‡ä»¶æ ‡ç­¾å…³è” |
| `getFileTags()` | `fileId: number` | `Promise<FileTagData[]>` | è·å–æ–‡ä»¶çš„æ‰€æœ‰æ ‡ç­¾ |
| `deleteFileTag()` | `fileId: number, tagId: number` | `Promise<void>` | åˆ é™¤æ–‡ä»¶æ ‡ç­¾å…³è” |
| `getLinks()` | `skip: number=0, limit: number=100` | `Promise<LinkData[]>` | è·å–é“¾æ¥åˆ—è¡¨ |
| `getLink()` | `linkId: number` | `Promise<LinkData>` | æ ¹æ®IDè·å–é“¾æ¥ |
| `createLink()` | `linkData: Omit<LinkData, 'id'>` | `Promise<LinkData>` | åˆ›å»ºé“¾æ¥ |
| `updateLink()` | `linkId: number, linkData: Partial<LinkData>` | `Promise<LinkData>` | æ›´æ–°é“¾æ¥ |
| `deleteLink()` | `linkId: number` | `Promise<void>` | åˆ é™¤é“¾æ¥ |
| `getFileLinks()` | `fileId: number` | `Promise<LinkData[]>` | è·å–æ–‡ä»¶çš„æ‰€æœ‰é“¾æ¥ |
| `suggestTags()` | `title: string, content: string, maxTags: number=5` | `Promise<string[]>` | AIæ™ºèƒ½æ ‡ç­¾å»ºè®® |
| `discoverSmartLinks()` | `fileId: number` | `Promise<SmartLinkSuggestion[]>` | æ™ºèƒ½å‘ç°æ–‡ç« é—´çš„é“¾æ¥å…³ç³» |
| `getAIStatus()` | æ—  | `Promise<{available: boolean, openai_configured: boolean, base_url: string}>` | è·å–AIæœåŠ¡çŠ¶æ€ |
| `healthCheck()` | æ—  | `Promise<{status: string, service: string}>` | å¥åº·æ£€æŸ¥ |
| `chat()` | `request: ChatRequest{question: string, max_context_length?: number, search_limit?: number}` | `Promise<ChatResponse>` | AIæ™ºèƒ½é—®ç­”ï¼ŒåŸºäºRAGæŠ€æœ¯å›ç­”é—®é¢˜å¹¶è¿”å›ç›¸å…³æ–‡æ¡£ |

### å‰ç«¯ç»„ä»¶

#### æ–‡ä»¶æ ‘ç»„ä»¶ (frontend/src/components/FileTree.tsx)

| å‡½æ•°å | ä¼ å…¥å‚æ•° | ä¼ å‡ºå‚æ•° | åŠŸèƒ½è¯´æ˜ |
|--------|----------|----------|----------|
| `FileTree` | `onFileSelect: (filePath: string, fileName: string) => void, selectedFile?: string` | `React.FC` | æ–‡ä»¶æ ‘ä¸»ç»„ä»¶ |
| `loadFileTree()` | æ—  | `Promise<void>` | åŠ è½½æ–‡ä»¶æ ‘æ•°æ® |
| `handleSelect()` | `keys: React.Key[], info: any` | `void` | å¤„ç†æ–‡ä»¶é€‰æ‹© |
| `handleDoubleClick()` | `e: React.MouseEvent, node: any` | `void` | å¤„ç†åŒå‡»äº‹ä»¶ |
| `handleCreate()` | æ—  | `Promise<void>` | åˆ›å»ºæ–‡ä»¶/ç›®å½• |
| `showCreateModal()` | `type: 'file'|'folder', parentPath: string=""` | `void` | æ˜¾ç¤ºåˆ›å»ºæ¨¡æ€æ¡† |
| `handleRename()` | æ—  | `Promise<void>` | é‡å‘½åæ–‡ä»¶/ç›®å½• |
| `handleDelete()` | `nodePath: string` | `Promise<void>` | åˆ é™¤æ–‡ä»¶/ç›®å½• |

#### æ ‡ç­¾ç®¡ç†ç»„ä»¶ (frontend/src/components/TagManager.tsx)

| å‡½æ•°å | ä¼ å…¥å‚æ•° | ä¼ å‡ºå‚æ•° | åŠŸèƒ½è¯´æ˜ |
|--------|----------|----------|----------|
| `TagManager` | `fileId?: number, onClose: () => void` | `React.FC` | æ ‡ç­¾ç®¡ç†ä¸»ç»„ä»¶ |
| `loadTags()` | æ—  | `Promise<void>` | åŠ è½½æ ‡ç­¾åˆ—è¡¨ |
| `loadFileTags()` | æ—  | `Promise<void>` | åŠ è½½æ–‡ä»¶æ ‡ç­¾å…³è” |
| `handleCreateTag()` | `values: {name: string, description?: string, color?: string}` | `Promise<void>` | åˆ›å»ºæ–°æ ‡ç­¾ |
| `handleEditTag()` | `tag: TagData` | `void` | ç¼–è¾‘æ ‡ç­¾ |
| `handleUpdateTag()` | `values: {name: string, description?: string, color?: string}` | `Promise<void>` | æ›´æ–°æ ‡ç­¾ |
| `handleDeleteTag()` | `tagId: number` | `Promise<void>` | åˆ é™¤æ ‡ç­¾ |
| `handleAddTagToFile()` | `tagId: number` | `Promise<void>` | ä¸ºæ–‡ä»¶æ·»åŠ æ ‡ç­¾ |
| `handleRemoveTagFromFile()` | `tagId: number` | `Promise<void>` | ä»æ–‡ä»¶ç§»é™¤æ ‡ç­¾ |
| `handleAISuggestTags()` | æ—  | `Promise<void>` | AIæ™ºèƒ½æ ‡ç­¾å»ºè®® |
| `applySuggestedTag()` | `tagName: string` | `Promise<void>` | åº”ç”¨å»ºè®®çš„æ ‡ç­¾ |

#### é“¾æ¥ç®¡ç†ç»„ä»¶ (frontend/src/components/LinkManager.tsx)

| å‡½æ•°å | ä¼ å…¥å‚æ•° | ä¼ å‡ºå‚æ•° | åŠŸèƒ½è¯´æ˜ |
|--------|----------|----------|----------|
| `LinkManager` | `fileId?: number, onClose: () => void` | `React.FC` | é“¾æ¥ç®¡ç†ä¸»ç»„ä»¶ |
| `loadLinks()` | æ—  | `Promise<void>` | åŠ è½½é“¾æ¥åˆ—è¡¨ |
| `loadFileLinks()` | æ—  | `Promise<void>` | åŠ è½½æ–‡ä»¶é“¾æ¥ |
| `loadFiles()` | æ—  | `Promise<void>` | åŠ è½½æ–‡ä»¶åˆ—è¡¨ |
| `handleCreateLink()` | `values: {target_file_id: number, link_type: string, description?: string}` | `Promise<void>` | åˆ›å»ºæ–°é“¾æ¥ |
| `handleUpdateLink()` | `linkId: number, values: {link_type: string, description?: string}` | `Promise<void>` | æ›´æ–°é“¾æ¥ |
| `handleDeleteLink()` | `linkId: number` | `Promise<void>` | åˆ é™¤é“¾æ¥ |
| `handleDiscoverSmartLinks()` | æ—  | `Promise<void>` | æ™ºèƒ½é“¾æ¥å‘ç° |
| `applySuggestion()` | `suggestion: SmartLinkSuggestion` | `Promise<void>` | åº”ç”¨é“¾æ¥å»ºè®® |
| `ignoreSuggestion()` | `suggestionIndex: number` | `void` | å¿½ç•¥é“¾æ¥å»ºè®® |
| `getLinkTypeIcon()` | `type: string` | `React.ReactNode` | è·å–é“¾æ¥ç±»å‹å›¾æ ‡ |
| `getLinkTypeColor()` | `type: string` | `string` | è·å–é“¾æ¥ç±»å‹é¢œè‰² |

#### æœç´¢æ¨¡æ€æ¡†ç»„ä»¶ (frontend/src/components/SearchModal.tsx)

| å‡½æ•°å | ä¼ å…¥å‚æ•° | ä¼ å‡ºå‚æ•° | åŠŸèƒ½è¯´æ˜ |
|--------|----------|----------|----------|
| `SearchModal` | `visible: boolean, onClose: () => void, onSelectFile: (filePath: string, fileName: string) => void` | `React.FC` | æœç´¢æ¨¡æ€æ¡†ä¸»ç»„ä»¶ |
| `loadSearchHistory()` | æ—  | `Promise<void>` | åŠ è½½æœç´¢å†å² |
| `loadPopularQueries()` | æ—  | `Promise<void>` | åŠ è½½çƒ­é—¨æŸ¥è¯¢ |
| `handleSearch()` | `query: string` | `Promise<void>` | æ‰§è¡Œæœç´¢ |
| `handleSelectResult()` | `result: SearchResult` | `void` | é€‰æ‹©æœç´¢ç»“æœ |
| `handleSelectHistoryOrPopular()` | `query: string` | `void` | é€‰æ‹©å†å²æˆ–çƒ­é—¨æœç´¢ |
| `getSearchTypeIcon()` | `type: string` | `React.ReactNode` | è·å–æœç´¢ç±»å‹å›¾æ ‡ |
| `getSearchTypeColor()` | `type: string` | `string` | è·å–æœç´¢ç±»å‹é¢œè‰² |
| `formatFileSize()` | `size?: number` | `string` | æ ¼å¼åŒ–æ–‡ä»¶å¤§å° |
| `formatDate()` | `dateStr?: string` | `string` | æ ¼å¼åŒ–æ—¥æœŸ |

#### ç¬”è®°ç¼–è¾‘å™¨ç»„ä»¶ (frontend/src/components/NoteEditor.tsx)

| å‡½æ•°å | ä¼ å…¥å‚æ•° | ä¼ å‡ºå‚æ•° | åŠŸèƒ½è¯´æ˜ |
|--------|----------|----------|----------|
| `NoteEditor` | `filePath?: string, fileName?: string` | `React.FC` | ç¬”è®°ç¼–è¾‘å™¨ä¸»ç»„ä»¶ |
| `loadFile()` | `path: string` | `Promise<void>` | åŠ è½½æ–‡ä»¶å†…å®¹ |
| `saveFile()` | æ—  | `Promise<void>` | ä¿å­˜æ–‡ä»¶å†…å®¹ |
| `handleContentChange()` | `value: string` | `void` | å¤„ç†å†…å®¹å˜åŒ– |
| `handleSave()` | æ—  | `Promise<void>` | å¤„ç†ä¿å­˜æ“ä½œ |
| `handleTagsClick()` | æ—  | `void` | æ‰“å¼€æ ‡ç­¾ç®¡ç†æŠ½å±‰ |
| `handleLinksClick()` | æ—  | `void` | æ‰“å¼€é“¾æ¥ç®¡ç†æŠ½å±‰ |
| `loadTagsAndLinksCount()` | æ—  | `Promise<void>` | åŠ è½½æ ‡ç­¾å’Œé“¾æ¥æ•°é‡ |

#### å¯è°ƒæ•´ä¾§è¾¹æ ç»„ä»¶ (frontend/src/components/ResizableSider.tsx)

| å‡½æ•°å | ä¼ å…¥å‚æ•° | ä¼ å‡ºå‚æ•° | åŠŸèƒ½è¯´æ˜ |
|--------|----------|----------|----------|
| `ResizableSider` | `children: React.ReactNode, defaultWidth: number=300, minWidth: number=200, maxWidth: number=600` | `React.FC` | å¯è°ƒæ•´å¤§å°çš„ä¾§è¾¹æ ç»„ä»¶ |

#### AIèŠå¤©æ¨¡æ€æ¡†ç»„ä»¶ (frontend/src/components/ChatModal.tsx)

| å‡½æ•°å | ä¼ å…¥å‚æ•° | ä¼ å‡ºå‚æ•° | åŠŸèƒ½è¯´æ˜ |
|--------|----------|----------|----------|
| `ChatModal` | `visible: boolean, onClose: () => void, onSelectFile: (filePath: string, fileName: string) => void` | `React.FC` | AIæ™ºèƒ½é—®ç­”èŠå¤©ç•Œé¢ä¸»ç»„ä»¶ |
| `handleSendMessage()` | æ—  | `Promise<void>` | å‘é€ç”¨æˆ·é—®é¢˜å¹¶è·å–AIå›ç­” |
| `handleDocumentClick()` | `doc: ChatResponse['related_documents'][0]` | `void` | ç‚¹å‡»ç›¸å…³æ–‡æ¡£è·³è½¬åˆ°å¯¹åº”æ–‡ä»¶ |
| `handleClearChat()` | æ—  | `void` | æ¸…ç©ºå¯¹è¯å†å² |
| `formatTime()` | `date: Date` | `string` | æ ¼å¼åŒ–æ¶ˆæ¯æ—¶é—´æ˜¾ç¤º |
| `formatSimilarity()` | `similarity: number` | `string` | æ ¼å¼åŒ–ç›¸ä¼¼åº¦ç™¾åˆ†æ¯”æ˜¾ç¤º |

**ç‰¹æ€§**ï¼š
- **RAGé—®ç­”**ï¼šåŸºäºæ£€ç´¢å¢å¼ºç”ŸæˆæŠ€æœ¯ï¼Œå…ˆæœç´¢ç›¸å…³ç¬”è®°ï¼Œå†ç”Ÿæˆå›ç­”
- **æ™ºèƒ½å¯¹è¯**ï¼šæ”¯æŒå¤šè½®å¯¹è¯ï¼Œä¿æŒä¸Šä¸‹æ–‡ç†è§£
- **ç›¸å…³æ–‡æ¡£å±•ç¤º**ï¼šæ˜¾ç¤ºå›ç­”å¼•ç”¨çš„ç›¸å…³ç¬”è®°ï¼Œæ”¯æŒç‚¹å‡»è·³è½¬
- **ç°ä»£åŒ–ç•Œé¢**ï¼šä»¿å¾®ä¿¡èŠå¤©ç•Œé¢ï¼Œç”¨æˆ·ä½“éªŒå‹å¥½
- **å¿«æ·é”®æ”¯æŒ**ï¼šEnterå‘é€æ¶ˆæ¯ï¼ŒShift+Enteræ¢è¡Œ
- **æ€§èƒ½ç»Ÿè®¡**ï¼šæ˜¾ç¤ºå¤„ç†æ—¶é—´å’Œç›¸å…³æ–‡æ¡£æ•°é‡
- **é”™è¯¯å¤„ç†**ï¼šAIæœåŠ¡ä¸å¯ç”¨æ—¶æ˜¾ç¤ºå‹å¥½é”™è¯¯ä¿¡æ¯
- **è‡ªåŠ¨æ»šåŠ¨**ï¼šæ–°æ¶ˆæ¯è‡ªåŠ¨æ»šåŠ¨åˆ°åº•éƒ¨

## å˜é‡è¯´æ˜

### ç¯å¢ƒå˜é‡

#### åº”ç”¨é…ç½®
- `APP_NAME` - åº”ç”¨åç§°ï¼Œé»˜è®¤ï¼š`AIç¬”è®°æœ¬`
- `APP_VERSION` - åº”ç”¨ç‰ˆæœ¬ï¼Œé»˜è®¤ï¼š`1.0.0`
- `DEBUG_MODE` - è°ƒè¯•æ¨¡å¼ï¼Œé»˜è®¤ï¼š`false`
- `SERVER_HOST` - æœåŠ¡å™¨ä¸»æœºåœ°å€ï¼Œé»˜è®¤ï¼š`0.0.0.0`
- `SERVER_PORT` - æœåŠ¡å™¨ç«¯å£ï¼Œé»˜è®¤ï¼š`8000`

#### æ•°æ®åº“é…ç½®
- `DATABASE_URL` - æ•°æ®åº“è¿æ¥URLï¼Œé»˜è®¤ï¼š`sqlite:///./data/ai_notebook.db`
- `CHROMA_DB_PATH` - ChromaDBå‘é‡æ•°æ®åº“è·¯å¾„ï¼Œé»˜è®¤ï¼š`./data/chroma_db`

#### AIæ¨¡å‹é…ç½®

##### è¯­è¨€æ¨¡å‹é…ç½®
- `OPENAI_API_KEY` - OpenAI APIå¯†é’¥ï¼Œè®¾ç½®ä¸º`ollama`è¡¨ç¤ºä½¿ç”¨æœ¬åœ°OllamaæœåŠ¡
- `OPENAI_BASE_URL` - OpenAI APIåŸºç¡€URLï¼Œé»˜è®¤ï¼š`http://host.docker.internal:11434`ï¼ˆDockerå®¹å™¨è®¿é—®å®¿ä¸»æœºOllamaæœåŠ¡ï¼‰
- `OPENAI_MODEL` - LLMæ¨¡å‹åç§°ï¼Œé»˜è®¤ï¼š`qwen2.5:0.5b`
- `LLM_TEMPERATURE` - ç”Ÿæˆæ¸©åº¦ï¼Œé»˜è®¤ï¼š`0.7`
- `LLM_MAX_TOKENS` - æœ€å¤§ç”Ÿæˆtokenæ•°ï¼Œé»˜è®¤ï¼š`2048`

##### åµŒå…¥æ¨¡å‹é…ç½®ï¼ˆæ”¯æŒç‹¬ç«‹é…ç½®ï¼‰
- `EMBEDDING_MODEL_NAME` - åµŒå…¥æ¨¡å‹åç§°ï¼Œé»˜è®¤ï¼š`quentinz/bge-large-zh-v1.5:latest`ï¼ˆBGEä¸­æ–‡åµŒå…¥æ¨¡å‹ï¼‰
- `EMBEDDING_BASE_URL` - åµŒå…¥æ¨¡å‹ä¸“ç”¨APIåœ°å€ï¼Œä¸ºç©ºæ—¶ä½¿ç”¨`OPENAI_BASE_URL`
- `EMBEDDING_API_KEY` - åµŒå…¥æ¨¡å‹ä¸“ç”¨APIå¯†é’¥ï¼Œä¸ºç©ºæ—¶ä½¿ç”¨`OPENAI_API_KEY`

**çµæ´»é…ç½®ç¤ºä¾‹**ï¼š
- **ç»Ÿä¸€æœåŠ¡å•†**ï¼šåªé…ç½®`OPENAI_*`å˜é‡ï¼ŒåµŒå…¥æ¨¡å‹ä¼šè‡ªåŠ¨ä½¿ç”¨ç›¸åŒé…ç½®
- **æ··åˆæœåŠ¡å•†**ï¼šè¯­è¨€æ¨¡å‹ç”¨OpenAIï¼ˆé«˜æ€§èƒ½ï¼‰ï¼ŒåµŒå…¥æ¨¡å‹ç”¨æœ¬åœ°Ollamaï¼ˆèŠ‚çœæˆæœ¬ï¼‰
- **å®Œå…¨åˆ†ç¦»**ï¼šè¯­è¨€æ¨¡å‹å’ŒåµŒå…¥æ¨¡å‹ä½¿ç”¨ä¸åŒçš„æœåŠ¡å•†å’ŒAPIå¯†é’¥

#### æ–‡ä»¶å­˜å‚¨é…ç½®
- `MAX_FILE_SIZE` - æœ€å¤§æ–‡ä»¶å¤§å°ï¼ˆå­—èŠ‚ï¼‰ï¼Œé»˜è®¤ï¼š`10485760`ï¼ˆ10MBï¼‰

#### æœç´¢é…ç½®
- `SEARCH_CHUNK_SIZE` - æ–‡æœ¬åˆ†å—å¤§å°ï¼Œé»˜è®¤ï¼š`1000`
- `SEARCH_OVERLAP` - åˆ†å—é‡å å¤§å°ï¼Œé»˜è®¤ï¼š`200`

#### âš ï¸ é‡è¦é…ç½®å‚æ•°ï¼ˆåœ¨docker-compose.ymlä¸­é…ç½®ï¼‰

##### è¯­ä¹‰æœç´¢æ ¸å¿ƒå‚æ•°
- **`EMBEDDING_DIMENSION`** - å‘é‡ç»´åº¦ï¼Œ**å¿…é¡»ä¸åµŒå…¥æ¨¡å‹åŒ¹é…**
  - BGE-large-zh-v1.5æ¨¡å‹ï¼š`1024`ç»´
  - OpenAI text-embedding-ada-002æ¨¡å‹ï¼š`1536`ç»´
  - **å½“å‰é…ç½®**ï¼š`1024`ï¼ˆåŒ¹é…BGEæ¨¡å‹ï¼‰
  
- **`SEMANTIC_SEARCH_THRESHOLD`** - è¯­ä¹‰æœç´¢è·ç¦»é˜ˆå€¼
  - **å«ä¹‰**ï¼šå‘é‡é—´çš„è·ç¦»å€¼ï¼Œ**æ•°å€¼è¶Šå°è¡¨ç¤ºè¶Šç›¸ä¼¼**
  - **èŒƒå›´**ï¼šé€šå¸¸åœ¨0.0-2.0ä¹‹é—´
  - **æ¨èå€¼**ï¼š
    - `0.5`ï¼šéå¸¸ä¸¥æ ¼ï¼Œåªè¿”å›é«˜åº¦ç›¸å…³çš„ç»“æœ
    - `0.8`ï¼šä¸­ç­‰ä¸¥æ ¼ï¼Œå¹³è¡¡ç›¸å…³æ€§å’Œå¬å›ç‡
    - `1.0`ï¼šè¾ƒå®½æ¾ï¼Œè¿”å›æ›´å¤šå¯èƒ½ç›¸å…³çš„ç»“æœ
    - `1.2`ï¼šå¾ˆå®½æ¾ï¼Œå¯èƒ½åŒ…å«å¼±ç›¸å…³ç»“æœ
  - **å½“å‰é…ç½®**ï¼š`1.0`
  - **è°ƒä¼˜å»ºè®®**ï¼šæ ¹æ®æœç´¢æ•ˆæœè°ƒæ•´ï¼Œç›¸å…³ç»“æœå¤ªå°‘å¯å¢å¤§é˜ˆå€¼ï¼Œç»“æœä¸å¤Ÿç²¾å‡†å¯å‡å°é˜ˆå€¼

##### é…ç½®ä¿®æ”¹æ–¹æ³•
è¦ä¿®æ”¹è¿™äº›å‚æ•°ï¼Œè¯·ç¼–è¾‘ `docker-compose.yml` æ–‡ä»¶ä¸­çš„ç¯å¢ƒå˜é‡ï¼š
```yaml
environment:
  - EMBEDDING_DIMENSION=1024  # å‘é‡ç»´åº¦
  - SEMANTIC_SEARCH_THRESHOLD=1.0  # è·ç¦»é˜ˆå€¼
```
ä¿®æ”¹åéœ€è¦é‡å¯å®¹å™¨ï¼š
```bash
docker-compose down && docker-compose up -d --build
```

### å…¨å±€å¸¸é‡

#### APIç›¸å…³
- `API_VERSION` - APIç‰ˆæœ¬å·ï¼Œå€¼ï¼š`v1`
- `API_PREFIX` - APIå‰ç¼€ï¼Œå€¼ï¼š`/api/v1`
- `CORS_ORIGINS` - å…è®¸çš„è·¨åŸŸæºï¼Œå€¼ï¼š`["http://localhost:3000"]`

#### æœç´¢ç›¸å…³
- `DEFAULT_SEARCH_LIMIT` - é»˜è®¤æœç´¢ç»“æœæ•°é‡ï¼Œå€¼ï¼š`20`
- `MAX_SEARCH_LIMIT` - æœ€å¤§æœç´¢ç»“æœæ•°é‡ï¼Œå€¼ï¼š`100`
- `SEARCH_TIMEOUT` - æœç´¢è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰ï¼Œå€¼ï¼š`30`

#### AIç›¸å…³
- `DEFAULT_TEMPERATURE` - é»˜è®¤AIç”Ÿæˆæ¸©åº¦ï¼Œå€¼ï¼š`0.7`
- `MAX_TOKENS` - æœ€å¤§ç”Ÿæˆtokenæ•°ï¼Œå€¼ï¼š`2048`
- `CHUNK_SIZE` - æ–‡æœ¬åˆ†å—å¤§å°ï¼Œå€¼ï¼š`1000`
- `CHUNK_OVERLAP` - åˆ†å—é‡å å¤§å°ï¼Œå€¼ï¼š`200`

## æ•°æ®æ¨¡å‹

### åå°ä»»åŠ¡ç³»ç»Ÿæ•°æ®æ¨¡å‹

#### PendingTask (backend/app/models/pending_task.py)

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| `id` | `Integer` | ä¸»é”®ï¼Œè‡ªå¢ID |
| `file_id` | `Integer` | å…³è”çš„æ–‡ä»¶IDï¼Œå¤–é”®å…³è”filesè¡¨ |
| `task_type` | `String(50)` | ä»»åŠ¡ç±»å‹ï¼š'vector_index'ï¼ˆå‘é‡ç´¢å¼•ï¼‰ |
| `status` | `String(20)` | ä»»åŠ¡çŠ¶æ€ï¼š'pending'ï¼ˆå¾…å¤„ç†ï¼‰ã€'processing'ï¼ˆå¤„ç†ä¸­ï¼‰ã€'completed'ï¼ˆå·²å®Œæˆï¼‰ã€'failed'ï¼ˆå¤±è´¥ï¼‰ |
| `priority` | `Integer` | ä»»åŠ¡ä¼˜å…ˆçº§ï¼Œæ•°å­—è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜ï¼Œé»˜è®¤ä¸º1 |
| `retry_count` | `Integer` | é‡è¯•æ¬¡æ•°ï¼Œé»˜è®¤ä¸º0ï¼Œæœ€å¤§é‡è¯•3æ¬¡ |
| `error_message` | `Text` | é”™è¯¯ä¿¡æ¯ï¼Œä»»åŠ¡å¤±è´¥æ—¶è®°å½•å…·ä½“é”™è¯¯ |
| `created_at` | `DateTime` | åˆ›å»ºæ—¶é—´ï¼Œé»˜è®¤ä¸ºå½“å‰æ—¶é—´ |
| `updated_at` | `DateTime` | æ›´æ–°æ—¶é—´ï¼Œæ¯æ¬¡ä¿®æ”¹æ—¶è‡ªåŠ¨æ›´æ–° |
| `started_at` | `DateTime` | å¼€å§‹å¤„ç†æ—¶é—´ï¼Œä»»åŠ¡å¼€å§‹æ—¶è®¾ç½® |
| `completed_at` | `DateTime` | å®Œæˆæ—¶é—´ï¼Œä»»åŠ¡å®Œæˆæˆ–å¤±è´¥æ—¶è®¾ç½® |

**ç´¢å¼•**ï¼š
- `ix_pending_tasks_file_id`ï¼šæ–‡ä»¶IDç´¢å¼•ï¼Œæé«˜æŸ¥è¯¢æ€§èƒ½
- `ix_pending_tasks_status`ï¼šçŠ¶æ€ç´¢å¼•ï¼Œå¿«é€Ÿç­›é€‰å¾…å¤„ç†ä»»åŠ¡
- `ix_pending_tasks_task_type`ï¼šä»»åŠ¡ç±»å‹ç´¢å¼•ï¼ŒæŒ‰ç±»å‹æŸ¥è¯¢
- `ix_pending_tasks_created_at`ï¼šåˆ›å»ºæ—¶é—´ç´¢å¼•ï¼Œç”¨äºæ¸…ç†æ—§ä»»åŠ¡

**å…³ç³»**ï¼š
- ä¸`File`æ¨¡å‹å»ºç«‹å¤–é”®å…³ç³»ï¼Œé€šè¿‡`file_id`å…³è”

## æµ‹è¯•

### è¿è¡Œæµ‹è¯•

```bash
# å‰ç«¯æµ‹è¯•
cd frontend
npm test

# åç«¯æµ‹è¯•
cd backend
pytest

# ç«¯åˆ°ç«¯æµ‹è¯•
npm run test:e2e
```

### æµ‹è¯•è¦†ç›–ç‡

- å•å…ƒæµ‹è¯•è¦†ç›–ç‡ç›®æ ‡ï¼š> 80%
- é›†æˆæµ‹è¯•è¦†ç›–ç‡ç›®æ ‡ï¼š> 70%
- APIæµ‹è¯•è¦†ç›–ç‡ç›®æ ‡ï¼š> 90%

## éƒ¨ç½²

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

```bash
# æ„å»ºç”Ÿäº§é•œåƒ
docker-compose -f docker-compose.prod.yml build

# å¯åŠ¨ç”Ÿäº§æœåŠ¡
docker-compose -f docker-compose.prod.yml up -d
```

### æ€§èƒ½ç›‘æ§

- åº”ç”¨æ€§èƒ½ç›‘æ§ï¼šé›†æˆAPMå·¥å…·
- èµ„æºä½¿ç”¨ç›‘æ§ï¼šCPUã€å†…å­˜ã€ç£ç›˜
- æ—¥å¿—æ”¶é›†ï¼šç»“æ„åŒ–æ—¥å¿—è®°å½•

## è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ Pull Request

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## æ›´æ–°æ—¥å¿—

### v0.1.0 (è®¡åˆ’ä¸­)
- åŸºç¡€æ¶æ„æ­å»º
- Markdownç¼–è¾‘å™¨å®ç°
- æ–‡ä»¶ç®¡ç†ç³»ç»Ÿ
- åŸºç¡€æœç´¢åŠŸèƒ½

### v0.2.0 (è®¡åˆ’ä¸­)
- AIé—®ç­”åŠŸèƒ½
- å‘é‡æœç´¢
- åŒå‘é“¾æ¥

### v0.3.0 (è®¡åˆ’ä¸­)
- é“¾æ¥å…³ç³»å¯è§†åŒ–
- æ™ºèƒ½æ¨èç³»ç»Ÿ
- æ’ä»¶ç³»ç»Ÿ

---

## é¡¹ç›®çŠ¶æ€

- é¡¹ç›®æ¦‚å¿µè®¾è®¡ï¼šâœ… å·²å®Œæˆ
- æŠ€æœ¯æ¶æ„è®¾è®¡ï¼šâœ… å·²å®Œæˆ
- å¼€å‘è®¡åˆ’åˆ¶å®šï¼šâœ… å·²å®Œæˆ
- åŸºç¡€æ¶æ„æ­å»ºï¼šâœ… å·²å®Œæˆ
- å¼€å‘ç¯å¢ƒæ­å»ºï¼šâœ… å·²å®Œæˆ

### æœ€æ–°è¿›å±•

#### ğŸ·ï¸ æ™ºèƒ½æ ‡ç­¾å»ºè®®åŠŸèƒ½ä¼˜åŒ– (2025-01-01)
- **æ ‡ç­¾å€™é€‰æœºåˆ¶**ï¼šä»é¢„è®¾å¸¸è§„æ ‡ç­¾åº“ï¼ˆé‡ç‚¹ã€å‰ç«¯ã€åç«¯ã€AIå¤§æ¨¡å‹ã€æŠ€å·§ç­‰ï¼‰ä¸­é€‰æ‹©
- **æ•°æ®åº“æ ‡ç­¾å¤ç”¨**ï¼šè‡ªåŠ¨è·å–å·²å­˜åœ¨çš„ä¸é‡å¤æ ‡ç­¾ï¼ŒæŒ‰ä½¿ç”¨æ¬¡æ•°æ’åºä¼˜å…ˆå±•ç¤º
- **æ™ºèƒ½éªŒè¯è¿‡æ»¤**ï¼šAIæ¨¡å‹åªèƒ½ä»å€™é€‰æ ‡ç­¾ä¸­é€‰æ‹©ï¼Œé¿å…è¿‡åº¦è‡ªç”±å‘æŒ¥åˆ›é€ æ–°æ ‡ç­¾
- **åå¤‡æ ‡ç­¾æœºåˆ¶**ï¼šå½“æ¨èæ ‡ç­¾è¿‡å°‘æ—¶ï¼Œè‡ªåŠ¨è¡¥å……é€šç”¨æ ‡ç­¾ï¼ˆç¬”è®°ã€æ–‡æ¡£ã€é‡ç‚¹ï¼‰
- **æç¤ºè¯ä¼˜åŒ–**ï¼šæ›´æ–°AIæç¤ºè¯ï¼Œæ˜ç¡®è¦æ±‚ä»å€™é€‰åˆ—è¡¨ä¸­é€‰æ‹©ï¼Œæé«˜æ ‡ç­¾ä¸€è‡´æ€§

#### ğŸ§¹ ä»£ç æ¸…ç†ä¼˜åŒ– (2025-01-01)
- **ç§»é™¤å®šæ—¶ä»»åŠ¡**ï¼šåˆ é™¤ä¸å†éœ€è¦çš„ `task_processor.py` å’Œ `start_task_processor.sh` è„šæœ¬
- **æ–‡æ¡£åŒæ­¥æ›´æ–°**ï¼šæ›´æ–°README.mdï¼Œå»æ‰å®šæ—¶ä»»åŠ¡ç›¸å…³æè¿°ï¼Œå¼ºè°ƒåŸºäºæ–‡ä»¶å˜åŠ¨çš„è‡ªåŠ¨ä»»åŠ¡å¤„ç†
- **æ¶æ„ç®€åŒ–**ï¼šç³»ç»Ÿé‡‡ç”¨æ–‡ä»¶å˜åŠ¨è§¦å‘çš„æ™ºèƒ½ä»»åŠ¡å¤„ç†ï¼Œæ— éœ€æ‰‹åŠ¨å¹²é¢„æˆ–å®šæ—¶æ‰§è¡Œ

### å†å²è¿›å±•ï¼ˆ2024å¹´12æœˆ30æ—¥ï¼‰

**é˜¶æ®µä¸€ï¼šåŸºç¡€æ¶æ„æ­å»º - å·²å®Œæˆ**

- âœ… å®Œæ•´é¡¹ç›®ç›®å½•ç»“æ„åˆ›å»º
- âœ… æœåŠ¡Dockerå®¹å™¨åŒ–æ¶æ„ï¼ˆfrontend + backendï¼‰
- âœ… å‰ç«¯React+TypeScriptåŸºç¡€æ¡†æ¶æ­å»º
- âœ… åç«¯FastAPIåŸºç¡€æ¡†æ¶æ­å»º
- âœ… å¼€å‘å’Œç”Ÿäº§ç¯å¢ƒé…ç½®
- âœ… å¯åŠ¨è„šæœ¬å’Œå·¥å…·é“¾
- âœ… é¡¹ç›®æ–‡æ¡£å’Œå¼€å‘æŒ‡å—

**å½“å‰çŠ¶æ€**: é¡¹ç›®åŸºç¡€æ¶æ„å·²æ­å»ºå®Œæˆï¼Œå¯ä»¥å¼€å§‹æ ¸å¿ƒåŠŸèƒ½å¼€å‘

**å¿«é€Ÿå¯åŠ¨**: è¯·æŸ¥çœ‹ [GETTING_STARTED.md](GETTING_STARTED.md) äº†è§£å¦‚ä½•å¯åŠ¨é¡¹ç›®

---

**æ³¨æ„**ï¼šæœ¬é¡¹ç›®ä»åœ¨å¼€å‘ä¸­ï¼ŒåŠŸèƒ½å’ŒAPIå¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ã€‚è¯·å…³æ³¨æ›´æ–°æ—¥å¿—äº†è§£æœ€æ–°è¿›å±•ã€‚

## API æ¥å£æ–‡æ¡£

### æœç´¢ç›¸å…³ API

#### 1. ç»Ÿä¸€æœç´¢æ¥å£
- **ç«¯ç‚¹**: `GET /api/v1/files/search`
- **å‚æ•°**:
  - `q`: æœç´¢æŸ¥è¯¢ (å¿…éœ€)
  - `search_type`: æœç´¢ç±»å‹ - keyword/semantic/mixed (é»˜è®¤: mixed)
  - `limit`: ç»“æœæ•°é‡é™åˆ¶ (é»˜è®¤: 50)
  - `similarity_threshold`: è¯­ä¹‰æœç´¢ç›¸ä¼¼åº¦é˜ˆå€¼ (é»˜è®¤: 0.7)
- **è¿”å›**: æœç´¢ç»“æœï¼ŒåŒ…å«æ–‡ä»¶ä¿¡æ¯ã€ç›¸ä¼¼åº¦è¯„åˆ†ã€å“åº”æ—¶é—´ç­‰

#### 2. æœç´¢å†å²æ¥å£
- **ç«¯ç‚¹**: `GET /api/v1/files/search/history`
- **å‚æ•°**: `limit`: å†å²è®°å½•æ•°é‡ (é»˜è®¤: 20)
- **è¿”å›**: æœç´¢å†å²è®°å½•åˆ—è¡¨

#### 3. çƒ­é—¨æœç´¢æ¥å£
- **ç«¯ç‚¹**: `GET /api/v1/files/search/popular`
- **å‚æ•°**: `limit`: çƒ­é—¨æŸ¥è¯¢æ•°é‡ (é»˜è®¤: 10)
- **è¿”å›**: çƒ­é—¨æœç´¢æŸ¥è¯¢ç»Ÿè®¡

### AIæœåŠ¡å¢å¼º (AIService)
**æ–‡ä»¶ä½ç½®**: `backend/app/services/ai_service.py`

- `semantic_search(query, limit, similarity_threshold)`: è¯­ä¹‰æœç´¢
  - **åŠŸèƒ½**: åŸºäºå‘é‡ç›¸ä¼¼åº¦è¿›è¡Œè¯­ä¹‰æœç´¢
  - **å‚æ•°**:
    - `query`: æœç´¢æŸ¥è¯¢
    - `limit`: ç»“æœæ•°é‡é™åˆ¶  
    - `similarity_threshold`: ç›¸ä¼¼åº¦é˜ˆå€¼
  - **è¿”å›**: è¯­ä¹‰æœç´¢ç»“æœï¼ŒåŒ…å«ç›¸ä¼¼åº¦è¯„åˆ†

- `create_embeddings(file)`: åˆ›å»ºæ–‡ä»¶å‘é‡åµŒå…¥
  - **åŠŸèƒ½**: ä¸ºæ–‡ä»¶å†…å®¹ç”Ÿæˆå‘é‡åµŒå…¥ï¼Œç”¨äºè¯­ä¹‰æœç´¢
  - **å‚æ•°**: `file`: Fileå¯¹è±¡
  - **è¿”å›**: æ˜¯å¦æˆåŠŸåˆ›å»ºåµŒå…¥

### å‰ç«¯æœç´¢ç»„ä»¶ (SearchModal)
**æ–‡ä»¶ä½ç½®**: `frontend/src/components/SearchModal.tsx`

- **åŠŸèƒ½**: æ™ºèƒ½æœç´¢æ¨¡æ€çª—å£ç»„ä»¶
- **ç‰¹æ€§**:
  - æ”¯æŒä¸‰ç§æœç´¢æ¨¡å¼åˆ‡æ¢
  - å®æ—¶æœç´¢ç»“æœå±•ç¤º
  - æœç´¢å†å²å’Œçƒ­é—¨æœç´¢
  - ç›¸ä¼¼åº¦è¯„åˆ†æ˜¾ç¤º
  - æ–‡ä»¶å¿«é€Ÿè·³è½¬

### API å®¢æˆ·ç«¯å¢å¼º (ApiClient)
**æ–‡ä»¶ä½ç½®**: `frontend/src/services/api.ts`

- `search(query, searchType, limit, similarityThreshold)`: æ–°ç‰ˆæœç´¢æ¥å£
  - **åŠŸèƒ½**: è°ƒç”¨åç«¯ç»Ÿä¸€æœç´¢API
  - **å‚æ•°**: æœç´¢æŸ¥è¯¢ã€ç±»å‹ã€é™åˆ¶ã€é˜ˆå€¼
  - **è¿”å›**: å®Œæ•´æœç´¢å“åº”å¯¹è±¡

- `getSearchHistory(limit)`: è·å–æœç´¢å†å²
- `getPopularQueries(limit)`: è·å–çƒ­é—¨æŸ¥è¯¢ 
- `discoverSmartLinks(fileId)`: æ™ºèƒ½å‘ç°æ–‡ç« é—´çš„é“¾æ¥å…³ç³»

---

## ğŸš€ æ–°æ‰‹å®‰è£…æœ€ç®€æ•™ç¨‹

> **3åˆ†é’Ÿå¿«é€Ÿä¸Šæ‰‹AIç¬”è®°æœ¬ç³»ç»Ÿ**

### ğŸ“‹ å‰ç½®æ¡ä»¶

åªéœ€è¦å®‰è£…ä»¥ä¸‹è½¯ä»¶ï¼š
- **Docker Desktop** - [ä¸‹è½½åœ°å€](https://www.docker.com/products/docker-desktop/)
- **Ollama** - [ä¸‹è½½åœ°å€](https://ollama.ai/download)

### âš¡ ä¸€é”®å¯åŠ¨ï¼ˆæ¨èï¼‰

```bash
# 1. å…‹éš†é¡¹ç›®
git clone <repository-url>
cd AIç¬”è®°æœ¬é¡¹ç›®

# 2. ä¸€é”®å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d

# 3. è®¿é—®åº”ç”¨
# å‰ç«¯ç•Œé¢ï¼šhttp://localhost:3000
# APIæ–‡æ¡£ï¼šhttp://localhost:8000/docs
```

### ğŸ¤– AIåŠŸèƒ½é…ç½®

ä¸ºäº†ä½¿ç”¨AIé—®ç­”å’Œè¯­ä¹‰æœç´¢åŠŸèƒ½ï¼Œéœ€è¦é…ç½®æœ¬åœ°LLMï¼š

```bash
# 1. å¯åŠ¨Ollamaï¼ˆå¦‚æœè¿˜æ²¡å¯åŠ¨ï¼‰
ollama serve

# 2. ä¸‹è½½ä¸­æ–‡åµŒå…¥æ¨¡å‹ï¼ˆç”¨äºè¯­ä¹‰æœç´¢ï¼‰
ollama pull quentinz/bge-large-zh-v1.5:latest

# 3. ä¸‹è½½å¯¹è¯æ¨¡å‹ï¼ˆç”¨äºAIé—®ç­”ï¼‰
ollama pull qwen2.5:0.5b
```

### ğŸ“ å¼€å§‹ä½¿ç”¨

1. **æ‰“å¼€æµè§ˆå™¨** â†’ è®¿é—® http://localhost:3000
2. **åˆ›å»ºç¬”è®°** â†’ ç‚¹å‡»å·¦ä¾§"+"æŒ‰é’®åˆ›å»ºç¬¬ä¸€ç¯‡ç¬”è®°
3. **ç¼–å†™å†…å®¹** â†’ ä½¿ç”¨Markdownæ ¼å¼ç¼–å†™ç¬”è®°
4. **æ™ºèƒ½æœç´¢** â†’ æŒ‰`Ctrl+K`æ‰“å¼€æœç´¢ï¼Œä½“éªŒè¯­ä¹‰æœç´¢
5. **AIé—®ç­”** â†’ æŒ‰`Ctrl+/`æ‰“å¼€AIåŠ©æ‰‹ï¼ŒåŸºäºç¬”è®°å†…å®¹æé—®

### ğŸ”§ å¸¸è§é—®é¢˜

#### Q: Dockerå¯åŠ¨å¤±è´¥ï¼Ÿ
```bash
# æ£€æŸ¥Dockeræ˜¯å¦æ­£å¸¸è¿è¡Œ
docker --version
docker-compose --version

# é‡æ–°æ„å»ºå¹¶å¯åŠ¨
docker-compose down && docker-compose up -d --build
```

#### Q: AIåŠŸèƒ½ä¸å¯ç”¨ï¼Ÿ
```bash
# æ£€æŸ¥OllamaæœåŠ¡çŠ¶æ€
curl http://localhost:11434/api/tags

# å¦‚æœæ— å“åº”ï¼Œé‡å¯Ollama
ollama serve
```
#### Q: å¦‚ä½•é…ç½®Ollama,ä»¥æ”¯æŒåœ¨windowsçš„å®¹å™¨ä¸Šèƒ½è°ƒç”¨ï¼Ÿ
1. ä¿®æ”¹windowsç¯å¢ƒå˜é‡æ·»åŠ ï¼šå˜é‡åç§° OLLAMA_ORIGINS
2. å˜é‡å€¼ä¸ºï¼š *
3. é‡å¯OllamaæœåŠ¡


#### Q: å¦‚ä½•å¯¼å…¥ç°æœ‰ç¬”è®°ï¼Ÿ
1. å°†Markdownæ–‡ä»¶å¤åˆ¶åˆ° `notes/` ç›®å½•
2. åœ¨åº”ç”¨ä¸­ç‚¹å‡»"åˆ·æ–°"æŒ‰é’®
3. ç³»ç»Ÿä¼šè‡ªåŠ¨æ‰«æå¹¶å»ºç«‹ç´¢å¼•

### ğŸ¯ æ ¸å¿ƒåŠŸèƒ½ä½“éªŒ

| åŠŸèƒ½ | å¿«æ·é”® | è¯´æ˜ |
|------|--------|------|
| æœç´¢ç¬”è®° | `Ctrl+K` | æ”¯æŒå…³é”®è¯å’Œè¯­ä¹‰æœç´¢ |
| AIé—®ç­” | `Ctrl+/` | åŸºäºç¬”è®°å†…å®¹çš„æ™ºèƒ½é—®ç­” |
| ä¿å­˜ç¬”è®° | `Ctrl+S` | æ‰‹åŠ¨ä¿å­˜å½“å‰ç¬”è®° |
| æ–°å»ºæ–‡ä»¶ | ç‚¹å‡»`+` | åœ¨æ–‡ä»¶æ ‘ä¸­æ–°å»ºç¬”è®° |
| æ ‡ç­¾ç®¡ç† | å³ä¾§æŠ½å±‰ | ä¸ºç¬”è®°æ·»åŠ æ™ºèƒ½æ ‡ç­¾ |
| é“¾æ¥ç®¡ç† | å³ä¾§æŠ½å±‰ | å»ºç«‹ç¬”è®°é—´çš„å…³è”å…³ç³» |

### ğŸ’¡ ä½¿ç”¨æŠ€å·§

1. **è¯­ä¹‰æœç´¢**ï¼šå°è¯•ç”¨è‡ªç„¶è¯­è¨€æè¿°è¦æ‰¾çš„å†…å®¹ï¼Œå¦‚"å…³äºæœºå™¨å­¦ä¹ çš„ç¬”è®°"
2. **AIé—®ç­”**ï¼šå¯ä»¥é—®"æ€»ç»“ä¸€ä¸‹æˆ‘å…³äºPythonçš„å­¦ä¹ ç¬”è®°"è¿™æ ·çš„é—®é¢˜
3. **åŒå‘é“¾æ¥**ï¼šåœ¨ç¬”è®°ä¸­ä½¿ç”¨`[[æ–‡ä»¶å]]`è¯­æ³•åˆ›å»ºé“¾æ¥
4. **è‡ªåŠ¨ä¿å­˜**ï¼šç³»ç»Ÿæ¯30ç§’è‡ªåŠ¨ä¿å­˜ï¼Œæ— éœ€æ‹…å¿ƒä¸¢å¤±å†…å®¹
5. **æ‰¹é‡å¯¼å…¥**ï¼šç›´æ¥å°†æ–‡ä»¶å¤¹å¤åˆ¶åˆ°`notes/`ç›®å½•å³å¯æ‰¹é‡å¯¼å…¥

### ğŸ†˜ è·å–å¸®åŠ©

- **é¡¹ç›®æ–‡æ¡£**ï¼šæŸ¥çœ‹ [GETTING_STARTED.md](GETTING_STARTED.md) è·å–è¯¦ç»†è¯´æ˜
- **APIæ–‡æ¡£**ï¼šè®¿é—® http://localhost:8000/docs æŸ¥çœ‹å®Œæ•´API
- **é—®é¢˜åé¦ˆ**ï¼šåœ¨GitHub Issuesä¸­æäº¤é—®é¢˜å’Œå»ºè®®

---

**ğŸ‰ æ­å–œï¼ä½ å·²ç»æˆåŠŸæ­å»ºäº†å±äºè‡ªå·±çš„AIç¬”è®°æœ¬ç³»ç»Ÿï¼**

ç°åœ¨å¯ä»¥å¼€å§‹åˆ›å»ºç¬”è®°ï¼Œä½“éªŒAIå¢å¼ºçš„çŸ¥è¯†ç®¡ç†åŠŸèƒ½äº†ã€‚